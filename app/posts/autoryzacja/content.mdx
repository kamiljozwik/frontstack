export const meta = {
  title: "Frontend i autoryzacja",
  seo_desc: "",
  short: "",
  date: "2024-02-08",
  tags: ["Security"],
};

Z racji tego, Å¼e musiaÅ‚em w ostatnim czasie odÅ›wieÅ¼yÄ‡ swojÄ… wiedzÄ™ dotyczÄ…cÄ… autoryzacji, postanowiÅ‚em, Å¼e jest to dobry moment, aby podzieliÄ‡ siÄ™ swojÄ… wiedzÄ… na ten temat.

W artykule tym omÃ³wiÄ™ teoretyczne podstawy, rozwaÅ¼ania dotyczÄ…ce bezpieczeÅ„stwa i najlepsze praktyki zwiÄ…zane z uwierzytelnianiem uÅ¼ytkownikÃ³w po stronie frontendu.

Nie bÄ™dziemy tutaj niczego implementowaÄ‡, bardziej skupiÄ™ siÄ™ na przeglÄ…dzie rÃ³Å¼nych technologii i protokoÅ‚Ã³w, ktÃ³re powinniÅ›my znaÄ‡ i rozumieÄ‡, nawet wtedy, gdy korzystamy z gotowych rozwiÄ…zaÅ„.

## Podstawy

Zrozumienie protokoÅ‚Ã³w uwierzytelniania, takich jak OAuth, OpenID Connect i SAML, jest niezwykle waÅ¼ne dla zaprojektowania bezpiecznego i wydajnego systemu uwierzytelniania. KaÅ¼dy z tych protokoÅ‚Ã³w oferuje rÃ³Å¼ne mechanizmy kontroli dostÄ™pu, ktÃ³re mogÄ… byÄ‡ dostosowane do specyficznych potrzeb aplikacji. Ponadto, zasady zapewnienia bezpiecznego uwierzytelniania - poufnoÅ›Ä‡, integralnoÅ›Ä‡ i dostÄ™pnoÅ›Ä‡ - muszÄ… byÄ‡ Å›ciÅ›le przestrzegane, aby zminimalizowaÄ‡ ryzyko naruszeÅ„ bezpieczeÅ„stwa.

Co wiÄ™cej, zabezpieczenie przed atakami typu Cross-Site Scripting (XSS) i Cross-Site Request Forgery (CSRF) jest dzisiaj praktycznie niezbÄ™dne dla kaÅ¼dego systemu uwierzytelniania. Do tego dochodzi nam zabezpieczenie przed kradzieÅ¼Ä… tokenÃ³w i atakami typu [replay](https://www.youtube.com/watch?v=ai6qS13gKRo).

Niestety nie ma tutaj miejsca na kompromisy

## Znaczenie uwierzytelniania

Uwierzytelnianie uÅ¼ytkownika peÅ‚ni w naszych aplikacjach podwÃ³jnÄ… rolÄ™. Z jednej strony, jest to pierwsza linia obrony przed nieautoryzowanym dostÄ™pem do zasobÃ³w i danych. Z drugiej strony, sposÃ³b, w jaki uÅ¼ytkownicy sÄ… uwierzytelniani, ma bezpoÅ›redni wpÅ‚yw na ich doÅ›wiadczenia (UX) podczas korzystania z aplikacji. Skuteczne systemy uwierzytelniania muszÄ… znaleÅºÄ‡ rÃ³wnowagÄ™ miÄ™dzy rygorystycznym bezpieczeÅ„stwem a pÅ‚ynnoÅ›ciÄ… i prostotÄ… uÅ¼ytkowania.

### Uwierzytelnianie po stronie klienta i serwera

Tradycyjnie, uwierzytelnianie realizowane byÅ‚o po stronie serwera, gdzie aplikacje internetowe polegaÅ‚y na sesjach i ciasteczkach do zarzÄ…dzania stanem zalogowania uÅ¼ytkownika. JednakÅ¼e, z rozwojem aplikacji jednostronicowych (SPA) i frameworkÃ³w JavaScript, uwierzytelnianie po stronie klienta staÅ‚o siÄ™ nieco bardziej skomplikowane. Ta zmiana paradygmu wymaga od deweloperÃ³w gÅ‚Ä™bszego zrozumienia zabezpieczeÅ„ po stronie klienta, w tym sposobÃ³w przechowywania tokenÃ³w uwierzytelniajÄ…cych i zarzÄ…dzania stanem sesji.

### Tokeny i sesje

Tokeny (np. `JWT` ([_JSON Web Tokens_](https://jwt.io/))) i sesje sÄ… dwoma dominujÄ…cymi metodami zarzÄ…dzania stanem uwierzytelnienia w aplikacjach webowych.

Tokeny JWT, przechowywane po stronie klienta, oferujÄ… sposÃ³b na bezstanowÄ… weryfikacjÄ™ i autoryzacjÄ™ uÅ¼ytkownika. Z drugiej strony, sesje, zarzÄ…dzane po stronie serwera, tradycyjnie wykorzystujÄ… ciasteczka do przechowywania identyfikatorÃ³w sesji. WybÃ³r miÄ™dzy tokenami a sesjami zaleÅ¼y od wielu czynnikÃ³w, w tym wymagaÅ„ bezpieczeÅ„stwa, skalowalnoÅ›ci aplikacji i doÅ›wiadczenia uÅ¼ytkownika.

[Session vs Token Authentication in 100 Seconds](https://www.youtube.com/watch?v=UBUNrFtufWo)
[Difference between cookies, session and tokens](https://www.youtube.com/watch?v=GhrvZ5nUWNg)
[What Is JWT and Why Should You Use JWT](https://www.youtube.com/watch?v=7Q17ubqLfaM)

## ProtokoÅ‚y uwierzytelniania

Kolejnym waÅ¼nym tematem jest zrozumienie teoretycznych podstaw protokoÅ‚Ã³w, na ktÃ³rych opierajÄ… siÄ™ wspÃ³Å‚czesne systemy uwierzytelniania.

Pozwoli nam to nie tylko tworzyÄ‡ bezpieczne i efektywne rozwiÄ…zania, ale takÅ¼e na Å›wiadome wybieranie i dostosowywanie technologii do specyficznych potrzeb naszych projektÃ³w.

### OAuth

[OAuth](https://oauth.net/2/) jest otwartym standardem autoryzacji, ktÃ³ry umoÅ¼liwia bezpieczny dostÄ™p do zasobÃ³w uÅ¼ytkownika bez koniecznoÅ›ci ujawniania danych uwierzytelniajÄ…cych. Wykorzystywany gÅ‚Ã³wnie do delegowania dostÄ™pu, znajduje zastosowanie w sytuacjach, gdzie aplikacje Å¼Ä…dajÄ… dostÄ™pu do zasobÃ³w uÅ¼ytkownika na innym serwisie.

[OAuth 2 Explained In Simple Terms](https://www.youtube.com/watch?v=ZV5yTm4pT8g)

### OpenID Connect

[OpenID Connect](https://openid.net/developers/how-connect-works/) (OIDC) dziaÅ‚a na bazie OAuth 2.0 i dodaje warstwÄ™ uwierzytelniania do procesu autoryzacji. Pozwala klientom na weryfikacjÄ™ toÅ¼samoÅ›ci uÅ¼ytkownika koÅ„cowego na podstawie uwierzytelnienia przeprowadzonego przez serwer autoryzacji.

[What is OpenID Connect?](https://www.youtube.com/watch?v=CHczpasUEIc)

### OAuth + OIDC

Jak moÅ¼na zauwaÅ¼yÄ‡, OAuth i OIDC sÄ… czÄ™sto uÅ¼ywane razem w architekturze systemÃ³w uwierzytelniania, poniewaÅ¼ uzupeÅ‚niajÄ… siÄ™, oferujÄ…c zarÃ³wno bezpieczne delegowanie uprawnieÅ„, jak i uwierzytelnianie uÅ¼ytkownikÃ³w. Mimo Å¼e oba standardy sÄ… ze sobÄ… powiÄ…zane, sÅ‚uÅ¼Ä… rÃ³Å¼nym celom i rozwiÄ…zujÄ… rÃ³Å¼ne problemy w procesie uwierzytelniania i autoryzacji. SpÃ³jrzmy na to jeszcze raz.

OAuth 2.0 jest protokoÅ‚em autoryzacji, ktÃ³ry umoÅ¼liwia aplikacjom uzyskanie ograniczonego dostÄ™pu do zasobÃ³w uÅ¼ytkownika na innym serwerze. Jest to realizowane za pomocÄ… tokenu dostÄ™pu, ktÃ³ry aplikacja moÅ¼e uÅ¼yÄ‡ do Å¼Ä…dania zasobÃ³w w imieniu uÅ¼ytkownika bez koniecznoÅ›ci poznawania jego danych uwierzytelniajÄ…cych. OAuth 2.0 jest szeroko stosowany do delegowania uprawnieÅ„, umoÅ¼liwiajÄ…c uÅ¼ytkownikom udzielanie aplikacjom dostÄ™pu do swoich danych bez dzielenia siÄ™ swoimi hasÅ‚ami.

OpenID Connect, zbudowany na fundamencie OAuth 2.0, dodaje warstwÄ™ uwierzytelniania do procesu autoryzacji. OIDC umoÅ¼liwia klientom (aplikacjom) weryfikacjÄ™ toÅ¼samoÅ›ci uÅ¼ytkownika koÅ„cowego oraz uzyskanie podstawowych informacji o profilu uÅ¼ytkownika na podstawie uwierzytelnienia przeprowadzonego przez serwer autoryzacji. OIDC wprowadza pojÄ™cie _ID tokenu_, ktÃ³ry zawiera informacje o toÅ¼samoÅ›ci uÅ¼ytkownika oraz jest podpisany przez serwer autoryzacji, co umoÅ¼liwia jego weryfikacjÄ™ przez aplikacjÄ™.

- **OAuth 2.0** zajmuje siÄ™ bezpiecznym delegowaniem dostÄ™pu do zasobÃ³w, umoÅ¼liwiajÄ…c aplikacjom dziaÅ‚anie w imieniu uÅ¼ytkownika bez koniecznoÅ›ci poznawania jego danych uwierzytelniajÄ…cych.
- **OpenID Connect** dodaje funkcjonalnoÅ›Ä‡ uwierzytelniania, umoÅ¼liwiajÄ…c aplikacjom weryfikacjÄ™ toÅ¼samoÅ›ci uÅ¼ytkownika i uzyskanie informacji o jego profilu.

Ta synergia pozwala na budowanie systemÃ³w, ktÃ³re nie tylko bezpiecznie zarzÄ…dzajÄ… dostÄ™pem do zasobÃ³w, ale rÃ³wnieÅ¼ efektywnie uwierzytelniajÄ… uÅ¼ytkownikÃ³w i zarzÄ…dzajÄ… ich toÅ¼samoÅ›ciÄ…. DziÄ™ki temu deweloperzy mogÄ… skupiÄ‡ siÄ™ na tworzeniu wartoÅ›ciowych funkcji aplikacji, korzystajÄ…c z gotowych, bezpiecznych i sprawdzonych metod uwierzytelniania i autoryzacji, zamiast budowaÄ‡ te mechanizmy od podstaw.

[An Illustrated Guide to OAuth and OpenID Connect](https://www.youtube.com/watch?v=t18YB3xDfXI)

### SAML

[SAML](https://www.microsoft.com/pl-pl/security/business/security-101/what-is-security-assertion-markup-language-saml) (Security Assertion Markup Language) to standard oparty na XML sÅ‚uÅ¼Ä…cy do wymiany danych uwierzytelniajÄ…cych i autoryzacyjnych miÄ™dzy rÃ³Å¼nymi domenami. SAML jest czÄ™sto stosowany w korporacyjnych Å›rodowiskach federacyjnych, gdzie wymagana jest integracja systemÃ³w identyfikacji z rÃ³Å¼nych organizacji.

Jednak w swojej codziennej pracy zdecydowanie najczÄ™Å›ciej bÄ™dziecie spotykaÄ‡ siÄ™ z OAuth i OpenID Connect.

[SAML vs. OpenID (OIDC): What's the Difference?](https://www.youtube.com/watch?v=A7GVeqFvqFM)

## BezpieczeÅ„stwo

BezpieczeÅ„stwo uwierzytelniania na froncie polega nie tylko na zabezpieczaniu danych uwierzytelniajÄ…cych, ale takÅ¼e o ochronie caÅ‚ej aplikacji i danych uÅ¼ytkownikÃ³w przed potencjalnymi atakami. SpÃ³jrzmy na te najczÄ™Å›ciej spotykane.

### Cross-Site Scripting (XSS)

Ataki XSS wykorzystujÄ… luki bezpieczeÅ„stwa w aplikacjach webowych, pozwalajÄ…c atakujÄ…cym na wstrzykniÄ™cie zÅ‚oÅ›liwego kodu JavaScript do stron oglÄ…danych przez inne osoby.

Ochrona przed XSS wymaga [_sanitacji_](https://developer.mozilla.org/en-US/docs/Web/API/HTML_Sanitizer_API) danych wejÅ›ciowych uÅ¼ytkownika oraz stosowania odpowiednich polityk bezpieczeÅ„stwa zawartoÅ›ci ([CSP](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP)), ktÃ³re ograniczajÄ… ÅºrÃ³dÅ‚a skryptÃ³w i innych zasobÃ³w.

PrzykÅ‚adem _sanitacji_ moÅ¼e byÄ‡ tekst wpisywany w polu komentarza. JeÅ¼eli damy radÄ™ w tym tekÅ›cie umieÅ›ciÄ‡ zÅ‚oÅ›liwy skrypt, to uruchomi siÄ™ on w przeglÄ…darce uÅ¼ytkownika przeglÄ…dajÄ…cego tÄ… samÄ… stronÄ™ / czytajÄ…cego ten sam komentarz.

[Cross-Site Scripting (XSS) Explained in 7 minutes](https://www.youtube.com/watch?v=DqK_OYat-3M)

### Cross-Site Request Forgery (CSRF)

CSRF polega na wykorzystaniu zaufanej sesji uÅ¼ytkownika przez atakujÄ…cego do wykonania nieautoryzowanych dziaÅ‚aÅ„. Zapobieganie atakom CSRF wymaga stosowania tokenÃ³w CSRF, ktÃ³re zapewniajÄ…, Å¼e kaÅ¼de Å¼Ä…danie pochodzi od zaufanego uÅ¼ytkownika i nie zostaÅ‚o sfaÅ‚szowane.

[Cross-Site Request Forgery (CSRF) Explained](https://www.youtube.com/watch?v=eWEgUcHPle0)

### Bezpieczne przechowywanie tokenÃ³w i sesji

Bezpieczne przechowywanie tokenÃ³w uwierzytelniajÄ…cych i sesji ma kluczowe znaczenie dla ochrony aplikacji i danych uÅ¼ytkownika przed nieautoryzowanym dostÄ™pem. Tokeny, takie jak tokeny dostÄ™pu OAuth, JWT (JSON Web Tokens) czy inne rodzaje tokenÃ³w sesji, muszÄ… byÄ‡ przechowywane w sposÃ³b, ktÃ³ry minimalizuje ryzyko wykradzenia i naduÅ¼ycia.

Oto kilka strategii przechowywania tokenÃ³w po stronie klienta:

**Tokeny w pamiÄ™ci**

Przechowywanie tokenÃ³w uwierzytelniajÄ…cych bezpoÅ›rednio w pamiÄ™ci aplikacji jest jednÄ… z bezpieczniejszych metod. Ta technika ogranicza ryzyko kradzieÅ¼y tokenÃ³w przez skrypty XSS, poniewaÅ¼ dane nie sÄ… dostÄ™pne w staÅ‚ej formie w przeglÄ…darce (takiej jak `localStorage` czy `sessionStorage`), a zatem sÄ… trudniejsze do wydobycia przez atakujÄ…cego. WadÄ… jest to, Å¼e tokeny przechowywane w pamiÄ™ci sÄ… tracone przy odÅ›wieÅ¼eniu strony, co moÅ¼e wymagaÄ‡ ponownego uwierzytelnienia uÅ¼ytkownika. Takie rozwiÄ…zania spotykamy stosunkowo rzadko.

**Wykorzystanie pamiÄ™ci przeglÄ…darki (Web Storage) z rozwagÄ…**

ChoÄ‡ przechowywanie tokenÃ³w w pamiÄ™ci przeglÄ…darki, takiej jak `localStorage` lub `sessionStorage`, moÅ¼e wydawaÄ‡ siÄ™ wygodne, niesie to pewne ryzyko bezpieczeÅ„stwa, zwÅ‚aszcza w przypadku atakÃ³w XSS. JeÅ›li jednak decydujesz siÄ™ na tÄ™ metodÄ™, upewnij siÄ™, Å¼e aplikacja jest zabezpieczona przed atakami XSS i rozwaÅ¼ dodatkowe mechanizmy ochrony, takie jak szyfrowanie tokenÃ³w.

**`HttpOnly` i `Secure Cookies`**

Atrybuty ciasteczek `HttpOnly` i `Secure` znacznie [zwiÄ™kszajÄ… bezpieczeÅ„stwo](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#restrict_access_to_cookies) przechowywania tokenÃ³w. `HttpOnly` uniemoÅ¼liwia dostÄ™p do ciasteczka za pomocÄ… skryptÃ³w klienta, co zmniejsza ryzyko atakÃ³w XSS. Atrybut `Secure` zapewnia, Å¼e ciasteczka sÄ… wysyÅ‚ane tylko przez bezpieczne poÅ‚Ä…czenia (`HTTPS`), co chroni przed przechwyceniem danych przez atakujÄ…cych w niezabezpieczonych sieciach.

**Atrybut `SameSite`**

Atrybut `SameSite` dla ciasteczek pozwala na [ograniczenie wysyÅ‚ania ciasteczek](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies#samesite_attribute) w zapytaniach _cross-site_, co moÅ¼e znacznie zmniejszyÄ‡ ryzyko atakÃ³w CSRF. Ustawienie `SameSite=Strict` zapewnia, Å¼e ciasteczko jest wysyÅ‚ane tylko wtedy, gdy Å¼Ä…danie pochodzi z tego samego ÅºrÃ³dÅ‚a, co ciasteczko, co jest przydatne dla tokenÃ³w sesji.

**Odnawianie tokenÃ³w**

Odnawianie i rotacja tokenÃ³w to proces, w ktÃ³rym tokeny sÄ… regularnie wymieniane na nowe, nawet w trakcie aktywnej sesji uÅ¼ytkownika. To zmniejsza okno czasowe, w ktÃ³rym wykradziony token moÅ¼e byÄ‡ wykorzystany przez atakujÄ…cego. Praktyka ta, w poÅ‚Ä…czeniu z krÃ³tkim czasem Å¼ycia tokenÃ³w, znacznie zwiÄ™ksza bezpieczeÅ„stwo.

**Content Security Policy (`CSP`)**

Implementacja polityki bezpieczeÅ„stwa zawartoÅ›ci ([CSP](https://www.youtube.com/watch?v=txHc4zk6w3s)) moÅ¼e dodatkowo zabezpieczyÄ‡ aplikacjÄ™ przed atakami XSS, ograniczajÄ…c ÅºrÃ³dÅ‚a, z ktÃ³rych mogÄ… byÄ‡ Å‚adowane zasoby, oraz blokujÄ…c wykonanie niezaufanych skryptÃ³w. ChociaÅ¼ `CSP` nie jest bezpoÅ›rednio zwiÄ…zane z przechowywaniem tokenÃ³w, moÅ¼e znacznie zwiÄ™kszyÄ‡ ogÃ³lny poziom bezpieczeÅ„stwa aplikacji, w tym ochronÄ™ przechowywanych tokenÃ³w.

KaÅ¼da z tych strategii ma swoje specyficzne zastosowania i najlepiej sprawdza siÄ™ w poÅ‚Ä…czeniu z innymi praktykami, tworzÄ…c wielowarstwowy system obrony. PamiÄ™tajcie, aby nie polegaÄ‡ na pojedynczej metodzie zabezpieczeÅ„, ale zamiast tego stosujcie rÃ³Å¼ne kombinacje technik, aby maksymalnie zabezpieczyÄ‡ wraÅ¼liwe dane ğŸ”

### MFA (Multi-Factor Authentication)

PiszÄ…c o bezpieczeÅ„stwie, nie sposÃ³b pominaÄ‡ MFA.

MFA znaczÄ…co zwiÄ™ksza bezpieczeÅ„stwo poprzez wymaganie od uÅ¼ytkownika potwierdzenia toÅ¼samoÅ›ci za pomocÄ… wiÄ™cej niÅ¼ jednej metody uwierzytelniania, na przykÅ‚ad hasÅ‚a i kodu z aplikacji lub wiadomoÅ›ci SMS. WdraÅ¼anie MFA moÅ¼e skutecznie zredukowaÄ‡ ryzyko nieautoryzowanego dostÄ™pu, nawet jeÅ›li dane uwierzytelniajÄ…ce zostaÅ‚y skompromitowane.

[How does Multifactor Authentication work?](https://www.youtube.com/watch?v=lEHhivPJQ5w)

## Projektowanie UI

Projektowanie systemÃ³w uwierzytelniania, ktÃ³re sÄ… jednoczeÅ›nie bezpieczne i Å‚atwe w obsÅ‚udze, jest nie lada wyzwaniem. PoniÅ¼ej umieÅ›ciÅ‚em kilka gÅ‚Ã³wnych zasad pomagajÄ…cych w tworzeniu rozwiÄ…zaÅ„, ktÃ³re nie tylko chroniÄ… przed potencjalnymi atakami, ale takÅ¼e zapewniajÄ… pÅ‚ynnoÅ›Ä‡ i intuicyjnoÅ›Ä‡ uÅ¼ytkowania.

- **Prostota i intuicyjnoÅ›Ä‡**: Interfejsy uwierzytelniania powinny byÄ‡ proste i intuicyjne, aby maksymalnie uÅ‚atwiÄ‡ uÅ¼ytkownikom proces autoryzacji. Kompleksowe formularze i procesy mogÄ… zniechÄ™caÄ‡ i prowadziÄ‡ do bÅ‚Ä™dÃ³w, ktÃ³re z kolei mogÄ… wpÅ‚ywaÄ‡ na bezpieczeÅ„stwo.
- **Komunikaty o bÅ‚Ä™dach**: Jasne i pomocne komunikaty o bÅ‚Ä™dach mogÄ… znaczÄ…co poprawiÄ‡ doÅ›wiadczenie uÅ¼ytkownika. Komunikaty te powinny byÄ‡ dostatecznie informacyjne, aby uÅ¼ytkownik wiedziaÅ‚, jak poprawiÄ‡ bÅ‚Ä…d, ale bez ujawniania informacji, ktÃ³re mogÅ‚yby zostaÄ‡ wykorzystane przez potencjalnych atakujÄ…cych. _Ups, coÅ› poszÅ‚o nie tak..._ nie wystarczy ğŸ˜‰
- **DostÄ™pnoÅ›Ä‡**: ProjektujÄ…c systemy uwierzytelniania, naleÅ¼y wziÄ…Ä‡ pod uwagÄ™ dostÄ™pnoÅ›Ä‡, aby osoby z rÃ³Å¼nymi potrzebami mogÅ‚y bez problemu korzystaÄ‡ z aplikacji. Obejmuje to czytelnoÅ›Ä‡ tekstu, kontrast kolorÃ³w, wsparcie dla czytnikÃ³w ekranu i moÅ¼liwoÅ›Ä‡ nawigacji za pomocÄ… klawiatury.

[ğŸ“„12 Best Practices for Sign-Up and Login Page Design](https://uxdworld.com/2021/12/22/12-best-practices-for-sign-up-and-login-page-design/)

[ğŸ“„Designing UX Login Form and Process](https://uxplanet.org/designing-ux-login-form-and-process-8b17167ed5b9)

## Single Sign-On (SSO)

Single Sign-On (SSO), czyli jednokrotne logowanie, to strategia uwierzytelniania, ktÃ³ra umoÅ¼liwia uÅ¼ytkownikom dostÄ™p do wielu aplikacji i zasobÃ³w po jednym zalogowaniu. Zamiast koniecznoÅ›ci ponownego logowania do kaÅ¼dej aplikacji, uÅ¼ytkownik loguje siÄ™ tylko raz, a nastÄ™pnie uzyskuje dostÄ™p do wszystkich powiÄ…zanych zasobÃ³w bez koniecznoÅ›ci ponownej autoryzacji.

[What is Single Sign On (SSO)](https://www.youtube.com/watch?v=Bv6NZlqqn48)

[What Is Single Sign-on (SSO)? How It Works](https://www.youtube.com/watch?v=O1cRJWYF-g4)

KorzyÅ›ci pÅ‚ynÄ…ce z SSO:

- **UÅ‚atwienie dla uÅ¼ytkownikÃ³w**: Eliminuje potrzebÄ™ zapamiÄ™tywania wielu haseÅ‚ i ponownego logowania do rÃ³Å¼nych aplikacji.
- **ZwiÄ™kszone bezpieczeÅ„stwo**: DziÄ™ki jednokrotnemu zalogowaniu moÅ¼na zastosowaÄ‡ bardziej skomplikowane mechanizmy uwierzytelniania i kontroli dostÄ™pu.
- **EfektywnoÅ›Ä‡**: Administracja uÅ¼ytkownikami i zarzÄ…dzanie dostÄ™pem jest uproszczone, co prowadzi do obniÅ¼onych kosztÃ³w i mniejszego obciÄ…Å¼enia dla zespoÅ‚Ã³w IT.

### Architektura SSO

System SSO skÅ‚ada siÄ™ z kilku kluczowych elementÃ³w:

- **Identyfikator toÅ¼samoÅ›ci (_Identity Provider_, _IdP_)**: Jest to centralna platforma, ktÃ³ra zarzÄ…dza procesem uwierzytelniania i autoryzacji uÅ¼ytkownikÃ³w. IdP przechowuje dane uwierzytelniajÄ…ce, takie jak hasÅ‚a uÅ¼ytkownikÃ³w, i udziela autoryzacji dla rÃ³Å¼nych aplikacji.
- **UsÅ‚ugi dostawcy usÅ‚ug (Service Providers, SP)**: To aplikacje lub zasoby, do ktÃ³rych uÅ¼ytkownik ma dostÄ™p po zalogowaniu siÄ™. KaÅ¼dy SP musi mieÄ‡ integracjÄ™ z IdP, aby uzyskaÄ‡ autoryzacjÄ™ uÅ¼ytkownika.

Rodzaje SSO:

- **Federated SSO**: UÅ¼ytkownik autoryzuje siÄ™ za poÅ›rednictwem swojego domowego IdP, ktÃ³ry nastÄ™pnie udziela autoryzacji dla rÃ³Å¼nych aplikacji, nawet jeÅ›li sÄ… one hostowane przez rÃ³Å¼ne organizacje.
- **Enterprise SSO**: W tym przypadku IdP jest zarzÄ…dzany wewnÄ™trznie przez organizacjÄ™ i udziela autoryzacji dla aplikacji w ramach tej samej infrastruktury IT.

### Implementacja SSO

Implementacja SSO moÅ¼e odbywaÄ‡ siÄ™ za pomocÄ… rÃ³Å¼nych protokoÅ‚Ã³w i standardÃ³w, takich jak znane nam juÅ¼ OAuth2 i OpenID Connect czy SAML. WybÃ³r odpowiedniego protokoÅ‚u zaleÅ¼y od potrzeb i infrastruktury organizacji.

Mimo licznych korzyÅ›ci SSO moÅ¼e napotkaÄ‡ na pewne wyzwania, takie jak zÅ‚oÅ¼onoÅ›Ä‡ integracji z rÃ³Å¼nymi aplikacjami i platformami, zarzÄ…dzanie toÅ¼samoÅ›ciÄ… uÅ¼ytkownikÃ³w oraz zabezpieczenie systemu przed atakami typu _man-in-the-middle_.

WdroÅ¼enie SSO wymaga starannego planowania, analizy wymagaÅ„ biznesowych i technicznych, a takÅ¼e wspÃ³Å‚pracy miÄ™dzy rÃ³Å¼nymi zespoÅ‚ami w organizacji. Jednak, jeÅ›li zostanie poprawnie zaimplementowane, SSO moÅ¼e przynieÅ›Ä‡ znaczÄ…ce korzyÅ›ci zarÃ³wno dla uÅ¼ytkownikÃ³w, jak i organizacji, poprawiajÄ…c zarÃ³wno bezpieczeÅ„stwo, jak i wydajnoÅ›Ä‡ w zakresie zarzÄ…dzania dostÄ™pem.

## WebAuthn i uwierzytelnianie bezhasÅ‚owe

W miarÄ™ ewolucji standardÃ³w bezpieczeÅ„stwa cyfrowego uwierzytelnianie bezhasÅ‚owe zyskuje na popularnoÅ›ci, oferujÄ…c uÅ¼ytkownikom bezpieczniejszÄ… i bardziej wygodnÄ… alternatywÄ™ dla tradycyjnych haseÅ‚.

[WebAuthn](https://webauthn.io/) (Web Authentication) jest istotnym graczem w tej zmianie, zapewniajÄ…c standard dla uwierzytelniania bezhasÅ‚owego w aplikacjach webowych.

[What Is WebAuthn?](https://www.youtube.com/watch?v=zJPNuORkvvk)

### Co to jest WebAuthn?

WebAuthn to standard API dla przeglÄ…darek internetowych, ktÃ³ry umoÅ¼liwia uÅ¼ytkownikom bezpieczne uwierzytelnianie na stronach internetowych i w aplikacjach webowych, uÅ¼ywajÄ…c biometrii (takiej jak odciski palcÃ³w lub rozpoznawanie twarzy), kluczy bezpieczeÅ„stwa lub urzÄ…dzeÅ„ mobilnych. Standard ten jest promowany przez [World Wide Web Consortium](https://www.w3.org/) (_W3C_) oraz [FIDO Alliance](https://fidoalliance.org/), majÄ…c na celu zwiÄ™kszenie bezpieczeÅ„stwa i uÅ‚atwienie procesu logowania.

Uwierzytelnianie bezhasÅ‚owe oferuje kilka istotnych korzyÅ›ci w porÃ³wnaniu do tradycyjnych metod uwierzytelniania:

- **ZwiÄ™kszone bezpieczeÅ„stwo**: Eliminuje ryzyko zwiÄ…zane z phishingiem, atakami siÅ‚owymi i odsprzedaÅ¼Ä… skompromitowanych haseÅ‚.
- **Lepsze doÅ›wiadczenie uÅ¼ytkownika**: UÅ¼ytkownicy nie muszÄ… pamiÄ™taÄ‡ skomplikowanych haseÅ‚, co sprawia, Å¼e proces logowania jest szybszy i bardziej intuicyjny.
- **UniwersalnoÅ›Ä‡**: WebAuthn wspiera szeroki zakres metod uwierzytelniania, co pozwala uÅ¼ytkownikom na wybÃ³r preferowanej metody.

### Jak dziaÅ‚a WebAuthn?

Proces uwierzytelniania z WebAuthn moÅ¼na podzieliÄ‡ na dwa gÅ‚Ã³wne etapy: rejestracjÄ™ i logowanie.

- **Rejestracja**: UÅ¼ytkownik rejestruje urzÄ…dzenie uwierzytelniajÄ…ce na stronie internetowej, na przykÅ‚ad poprzez skanowanie odcisku palca lub podÅ‚Ä…czenie klucza bezpieczeÅ„stwa. Strona generuje unikalny klucz publiczny i prywatny dla tej sesji, gdzie klucz prywatny pozostaje na urzÄ…dzeniu uÅ¼ytkownika, a klucz publiczny jest przechowywany na serwerze.
- **Logowanie**: Podczas procesu logowania, strona internetowa wysyÅ‚a _wyzwanie_ do urzÄ…dzenia uÅ¼ytkownika. UrzÄ…dzenie uÅ¼ywa zapisanego klucza prywatnego do podpisania _wyzwania_, a odpowiedÅº jest wysyÅ‚ana z powrotem do strony do weryfikacji za pomocÄ… klucza publicznego. JeÅ›li podpis zostanie pomyÅ›lnie zweryfikowany, uÅ¼ytkownik zostaje zalogowany.

## Passkey

Passkey to nowe i innowacyjne rozwiÄ…zanie opracowane przez Google w celu zastÄ…pienia tradycyjnych haseÅ‚. Jest to czÄ™Å›Ä‡ szerszego trendu w branÅ¼y technologicznej majÄ…cego na celu wprowadzenie bardziej bezpiecznych i wygodnych metod uwierzytelniania, ktÃ³re mogÄ… skutecznie zredukowaÄ‡ ryzyko zwiÄ…zane z kradzieÅ¼Ä… danych i atakami phishingowymi.

Passkey to forma uwierzytelniania bezhasÅ‚owego, ktÃ³ra wykorzystuje klucze kryptograficzne do weryfikacji toÅ¼samoÅ›ci uÅ¼ytkownika. W przeciwieÅ„stwie do tradycyjnych haseÅ‚, ktÃ³re mogÄ… byÄ‡ podatne na ataki phishingowe i Å‚atwo skompromitowane, passkey oferuje znacznie bezpieczniejszÄ… alternatywÄ™. UÅ¼ytkownik autoryzuje siÄ™ za pomocÄ… urzÄ…dzenia, na ktÃ³rym jest juÅ¼ uwierzytelniony, takiego jak smartfon, za pomocÄ… metod biometrycznych (np. odcisk palca lub skan twarzy) lub PIN-u.

[Understand passkeys in 4 minutes](https://www.youtube.com/watch?v=2xdV-xut7EQ)

### Jak dziaÅ‚a Passkey?

Proces uwierzytelniania z uÅ¼yciem Passkey rozpoczyna siÄ™, gdy uÅ¼ytkownik prÃ³buje zalogowaÄ‡ siÄ™ do serwisu lub aplikacji. Zamiast wpisywania hasÅ‚a, uÅ¼ytkownik wykorzystuje zarejestrowane urzÄ…dzenie, na przykÅ‚ad smartfon, do potwierdzenia swojej toÅ¼samoÅ›ci. UrzÄ…dzenie to komunikuje siÄ™ z serwisem za pomocÄ… bezpiecznych protokoÅ‚Ã³w kryptograficznych, wymieniajÄ…c klucze, ktÃ³re potwierdzajÄ… toÅ¼samoÅ›Ä‡ uÅ¼ytkownika bez przekazywania wraÅ¼liwych danych, takich jak hasÅ‚o.

### KorzyÅ›ci z uÅ¼ycia Passkey

- **ZwiÄ™kszone bezpieczeÅ„stwo**: Wykorzystanie kryptografii asymetrycznej i uwierzytelniania dwuskÅ‚adnikowego znaczÄ…co utrudnia atakom przejÄ™cie konta.
- **Eliminacja haseÅ‚**: Passkey eliminuje potrzebÄ™ zapamiÄ™tywania i wprowadzania haseÅ‚, co nie tylko poprawia wygodÄ™ uÅ¼ytkowania, ale takÅ¼e redukuje ryzyko phishingu.
- **WszechstronnoÅ›Ä‡**: Passkey moÅ¼na uÅ¼ywaÄ‡ na rÃ³Å¼nych urzÄ…dzeniach i platformach, zapewniajÄ…c spÃ³jne doÅ›wiadczenie uÅ¼ytkownika niezaleÅ¼nie od kontekstu logowania.
- **ÅatwoÅ›Ä‡ w zarzÄ…dzaniu**: Dla administratorÃ³w systemÃ³w passkey upraszcza zarzÄ…dzanie toÅ¼samoÅ›ciami i dostÄ™pem, eliminujÄ…c koniecznoÅ›Ä‡ resetowania zapomnianych haseÅ‚ czy zarzÄ…dzania bazami haseÅ‚.

### Wyzwania

Mimo licznych korzyÅ›ci, wprowadzenie Passkey jako standardu uwierzytelniania moÅ¼e napotkaÄ‡ na wyzwania, takie jak potrzeba aktualizacji infrastruktury technologicznej, koniecznoÅ›Ä‡ edukacji uÅ¼ytkownikÃ³w na temat nowych metod uwierzytelniania oraz zapewnienie kompatybilnoÅ›ci z rÃ³Å¼norodnymi urzÄ…dzeniami i systemami operacyjnymi.

## Magic Links

Logowanie za pomocÄ… magicznych linkÃ³w (ang. magic links) stanowi prostÄ…, a zarazem bezpiecznÄ… metodÄ™ uwierzytelniania, ktÃ³ra eliminuje potrzebÄ™ tworzenia i zapamiÄ™tywania haseÅ‚. Jest to podejÅ›cie oparte na jednorazowym, unikalnym linku wysyÅ‚anym bezpoÅ›rednio do uÅ¼ytkownika, zazwyczaj za poÅ›rednictwem wiadomoÅ›ci e-mail. UÅ¼ytkownik, klikajÄ…c w ten link, jest automatycznie uwierzytelniany w aplikacji.

### Jak to dziaÅ‚a?

- **Å»Ä…danie logowania**: UÅ¼ytkownik wprowadza swÃ³j adres e-mail na stronie logowania.
- **WysyÅ‚anie magicznego linku**: System generuje unikalny, jednorazowy link uwierzytelniajÄ…cy i wysyÅ‚a go na adres e-mail uÅ¼ytkownika.
- **Uwierzytelnianie**: UÅ¼ytkownik klika link w e-mailu, co skutkuje jego uwierzytelnieniem i przekierowaniem do aplikacji.

### Zalety:

- **BezpieczeÅ„stwo**: Unikalne linki zmniejszajÄ… ryzyko atakÃ³w brute force i phishingu, poniewaÅ¼ nie opierajÄ… siÄ™ na tradycyjnych hasÅ‚ach.
- **Prostota**: UÅ¼ytkownicy nie muszÄ… pamiÄ™taÄ‡ haseÅ‚, co uÅ‚atwia proces logowania.
- **Wygodne odzyskiwanie dostÄ™pu**: W przypadku zapomnienia â€hasÅ‚aâ€, proces odzyskiwania dostÄ™pu jest taki sam jak proces logowania.

### Wyzwania:

- **ZaleÅ¼noÅ›Ä‡ od e-maila**: SkutecznoÅ›Ä‡ metody zaleÅ¼y od dostÄ™pnoÅ›ci i bezpieczeÅ„stwa skrzynki e-mailowej uÅ¼ytkownika.
- **Potencjalne ryzyko bezpieczeÅ„stwa**: JeÅ›li konto e-mail uÅ¼ytkownika zostanie skompromitowane, atakujÄ…cy moÅ¼e uzyskaÄ‡ dostÄ™p do wszystkich aplikacji, ktÃ³re uÅ¼ywajÄ… logowania za pomocÄ… magicznego linku.
- **WygaÅ›niÄ™cie linku**: KoniecznoÅ›Ä‡ monitorowania i zarzÄ…dzania czasem waÅ¼noÅ›ci magicznych linkÃ³w moÅ¼e wprowadzaÄ‡ dodatkowÄ… zÅ‚oÅ¼onoÅ›Ä‡.

Logowanie za pomocÄ… magicznych linkÃ³w jest szczegÃ³lnie przydatne w aplikacjach, gdzie priorytetem jest prostota uÅ¼ytkowania i minimalizacja barier przy logowaniu. Mimo pewnych wyzwaÅ„ jest to skuteczna alternatywa dla tradycyjnych metod uwierzytelniania, oferujÄ…ca dobry balans miÄ™dzy bezpieczeÅ„stwem a wygodÄ… uÅ¼ytkowania.

Magic linki moÅ¼ecie zobaczyÄ‡ w praktyce na mojej [stronie z kursami](https://kursy.frontstack.pl/login). ZdecydowaÅ‚em siÄ™ na skorzystanie z tej opcji wÅ‚aÅ›nie ze wzglÄ™du na wygodÄ™ uÅ¼ytkownikÃ³w. ChociaÅ¼ muszÄ™ przyznaÄ‡, Å¼e zdarzaÅ‚y mi siÄ™ sytuacje, gdzie uÅ¼ytkownicy nie do koÅ„ca rozumieli, jak to dziaÅ‚a i czemu nie mogÄ… po prostu wpisaÄ‡ swojego hasÅ‚a ğŸ˜‰

## Dodatkowe tematy

### Uwierzytelnianie w aplikacjach SPA

Aplikacje jednostronicowe oferujÄ… dynamiczny UX, niemalÅ¼e natychmiastowe Å‚adowanie treÅ›ci i pÅ‚ynne interakcje bez przeÅ‚adowywania strony. Uwierzytelnianie w SPA wymaga zastosowania bezstanowych tokenÃ³w, takich jak JWT, ktÃ³re mogÄ… byÄ‡ bezpiecznie przechowywane po stronie klienta i uÅ¼ywane do komunikacji z serwerem. WaÅ¼ne jest, aby zabezpieczyÄ‡ te tokeny przed potencjalnymi atakami, w tym przed XSS, oraz zapewniÄ‡ ich odnowienie w bezpieczny sposÃ³b, aby uniknÄ…Ä‡ przechwycenia przez nieuprawnione osoby.

### PWA

PWA Å‚Ä…czÄ… w sobie najlepsze cechy stron internetowych i natywnych aplikacji mobilnych, oferujÄ…c funkcjonalnoÅ›ci takie jak praca offline, szybkie Å‚adowanie i dostÄ™p do API sprzÄ™towych. Uwierzytelnianie w PWA musi uwzglÄ™dniaÄ‡ scenariusze pracy offline, co moÅ¼e wymagaÄ‡ synchronizacji danych uwierzytelniajÄ…cych po ponownym nawiÄ…zaniu poÅ‚Ä…czenia.

### Serverless

Architektury bezserwerowe (serverless) umoÅ¼liwiajÄ… deweloperom skupienie siÄ™ na kodzie aplikacji bez koniecznoÅ›ci zarzÄ…dzania infrastrukturÄ… serwerowÄ…. W kontekÅ›cie uwierzytelniania, funkcje serverless czÄ™sto korzystajÄ… z zewnÄ™trznych usÅ‚ug uwierzytelniania (np. Auth0, AWS Cognito), ktÃ³re zarzÄ…dzajÄ… procesami uwierzytelniania i autoryzacji. Kluczowe jest zapewnienie, Å¼e komunikacja miÄ™dzy aplikacjÄ… klienta a funkcjami bezserwerowymi jest zabezpieczona i Å¼e tokeny sÄ… odpowiednio walidowane.

### Kontrola dostÄ™pu: RBAC i ABAC

Kontrola dostÄ™pu jest nieodÅ‚Ä…cznym elementem systemÃ³w uwierzytelniania, zapewniajÄ…c, Å¼e uÅ¼ytkownicy majÄ… dostÄ™p tylko do zasobÃ³w, do ktÃ³rych posiadajÄ… uprawnienia. _Role-Based Access Control_ (`RBAC`) i _Attribute-Based Access Control_ (`ABAC`) to dwa popularne podejÅ›cia do zarzÄ…dzania dostÄ™pem. RBAC opiera siÄ™ na przydzielaniu dostÄ™pu na podstawie roli uÅ¼ytkownika, natomiast ABAC umoÅ¼liwia bardziej szczegÃ³Å‚owÄ… kontrolÄ™ dostÄ™pu, bazujÄ…c na atrybutach uÅ¼ytkownika, zasobu oraz kontekÅ›cie Å¼Ä…dania.

## Popularne narzÄ™dzia i usÅ‚ugi

Autoryzacja jest kluczowym elementem wiÄ™kszoÅ›ci aplikacji, dlatego teÅ¼ bardzo czÄ™sto bÄ™dziemy korzystaÄ‡ z gotowych, sprawdzonych w boju rozwiÄ…zaÅ„.

Teraz gdy mamy juÅ¼ solidne podstawy wiedzy na temat uwierzytelniania, bÄ™dziemy w stanie duÅ¼o Å›wiadomiej podchodziÄ‡ do wyboru narzÄ™dzi i usÅ‚ug, ktÃ³re bÄ™dÄ… speÅ‚niaÅ‚y nasze wymagania biznesowe i techniczne.

PoniÅ¼ej znajdziecie listÄ™ popularnych narzÄ™dzi i usÅ‚ug do uwierzytelniania, ktÃ³re warto mieÄ‡ na uwadze podczas projektowania aplikacji:

- [Auth0](https://auth0.com/)
- [AWS Cognito](https://aws.amazon.com/cognito/)
- [Okta](https://www.okta.com/)
- [Firebase Authentication](https://firebase.google.com/products/auth)
- [oidc-client-ts](https://authts.github.io/oidc-client-ts/)
- [Netlify Identity](https://docs.netlify.com/security/secure-access-to-sites/identity/)
- [Auth.js](https://authjs.dev/)
- [Passport.js](http://www.passportjs.org/)
- [Supabase](https://supabase.io/)
- [Microsoft Authentication Library (MSAL)](https://learn.microsoft.com/en-us/entra/identity-platform/msal-overview)
- [Azure Active Directory](https://azure.microsoft.com/en-us/services/active-directory/)
- [Google Identity Platform](https://developers.google.com/identity)
- [Keycloak](https://www.keycloak.org/)
- [Ory](https://www.ory.sh/)
- [OneLogin](https://www.onelogin.com/)
- [Authlete](https://www.authlete.com/)
- [FusionAuth](https://fusionauth.io/)
- [Hanko](https://www.hanko.io/)
- [SuperTokens](https://supertokens.com/)
