export const meta = {
  title: "Praca z Git â€“ Git Flow",
  seo_desc:
    "Git Flow, mimo iÅ¼ powstaÅ‚ dziesiÄ™Ä‡ lat temu, to nadal jest bardzo popularny. W tym poÅ›cie omÃ³wimy, czym jest Git Flow i jak go stosowaÄ‡.",
  short:
    "Zastanawiasz siÄ™, jak efektywnie korzystaÄ‡ z Git? Poznaj Git Flow - sprawdzony schemat pracy z tym systemem kontroli wersji. Dowiedz siÄ™, jak zorganizowaÄ‡ swoje repozytorium, zarzÄ…dzaÄ‡ gaÅ‚Ä™ziami i unikaÄ‡ baÅ‚aganu. Przeczytaj nasz artykuÅ‚, aby nauczyÄ‡ siÄ™ korzystaÄ‡ z Git Flow i sprawiÄ‡, Å¼e praca z Git stanie siÄ™ Å‚atwiejsza!",
  date: "2022-08-18",
  tags: ["FrontOps", "Git"],
};

Git jest aktualnie jednym z tych narzÄ™dzi, ktÃ³re jest niemal niezbÄ™dne podczas rozwijania aplikacji. Ten niezwykle popularny system kontroli wersji jest stosunkowo Å‚atwy do nauczenia siÄ™ oraz zaimplementowania w naszych projektach. Jednym z pierwszych pytaÅ„, ktÃ³re powstajÄ… zaraz po opanowaniu Gita, jest â€“ â€No dobra, ale jak tego teraz dobrze uÅ¼ywaÄ‡?â€. NieprzemyÅ›lane commitowanie, branchowanie, mergowanie wszystkiego do mastera moÅ¼e spowodowaÄ‡, Å¼e nie wykorzystamy w peÅ‚ni potencjaÅ‚u drzemiÄ…cego w Gicie. Dobrym pomysÅ‚em jest zaczÄ™cie od stosowania sprawdzonych juÅ¼ rozwiÄ…zaÅ„. W przypadku pracy z Gitem mamy obecnie dwa bardzo popularne podejÅ›cia: **Git Flow** oraz **GitHub Flow**. W tym artykule skupimy siÄ™ na nieco starszym i troszkÄ™ bardziej rozbudowanym schemacie, czyli Git Flow. GitHub Flow zostanie omÃ³wiony w oddzielnym wpisie.

## Czym jest â€flowâ€?

"Flow" to nic innego jak schemat pracy z Gitem. Jest to zestaw reguÅ‚, ktÃ³re okreÅ›lajÄ…, jak powinniÅ›my pracowaÄ‡ z naszym repozytorium. "Flow" jest ustalonym i znanym sposobem na to, jak w tworzonym przez nas programie wprowadzaÄ‡ nowe funkcjonalnoÅ›ci, poprawiaÄ‡ bÅ‚Ä™dy oraz wypuszczaÄ‡ nowe wersje na Å›rodowiska produkcyjne. Tylko tyle i aÅ¼ tyle. Jednak bez ustalonego schematu postÄ™powania i przy stosowaniu wolnej amerykanki, moÅ¼emy narobiÄ‡ w naszych repozytoriach niezÅ‚y baÅ‚agan.

<img src="/blog/praca-z-git-git-flow/mess.gif" />

## Git Flow

Git Flow zostaÅ‚ przedstawiony w 2010 roku i byÅ‚ jednym z pierwszych sposobÃ³w ustandaryzowania pracy z gitem. Co ciekawe, nie byÅ‚a to jakaÅ› wielka praca naukowa, a jedynie post na blogu ğŸ™‚. Oryginalny wpis, od ktÃ³rego wszystko siÄ™ zaczÄ™Å‚o moÅ¼na znaleÅºÄ‡ pod tym linkiem â€“ [A successful Git branching model](https://nvie.com/posts/a-successful-git-branching-model/).

PomysÅ‚ ten zostaÅ‚ bardzo dobrze przyjÄ™ty i w niemal niezmienionej formie funkcjonuje do dzisiaj. NaleÅ¼y pamiÄ™taÄ‡ o tym, Å¼e model ten zostaÅ‚ przedstawiony ponad 10 lat temu. SposÃ³b rozwoju oprogramowania nieco wtedy rÃ³Å¼niÅ‚ siÄ™ od wspÃ³Å‚czesnego podejÅ›cia. JeÅ¼eli dziaÅ‚asz w Å›rodowisku CI/CD i nowe wersje twojej aplikacji sÄ… wypuszczane niemal codziennie, to Git Flow nie bÄ™dzie dobry wyborem.

W przypadku Git Flow, mamy do czynienia z tzw. _releasami_ funkcjonalnoÅ›ci, nad ktÃ³rymi pracowaliÅ›my w ostatni czasie. Tak wiÄ™c nasza aplikacja raz na jakiÅ› czas zostaje uzupeÅ‚niona o kilka mniejszych bÄ…dÅº jakiÅ› jeden bardziej znaczÄ…cy _feature_. _Release_ taki moÅ¼e powstawaÄ‡ przykÅ‚adowo podczas jednego dwutygodniowego sprintu (korzystajÄ…c tutaj z terminologii [Scrum](https://pl.wikipedia.org/wiki/Scrum)).

Nie wchodzÄ…c w szczegÃ³Å‚y dotyczÄ…cych metodyk wytwarzania oprogramowania, zobaczmy, jak w caÅ‚oÅ›ci wyglÄ…da jeden cykl pracy z wykorzystanie Git Flow.

## Jak dziaÅ‚a Git Flow?

### GaÅ‚Ä™zie (_Branching_)

Pierwsza rzecz, ktÃ³rÄ… naleÅ¼y zrobiÄ‡, aby wdroÅ¼yÄ‡ model Git Flow, to odpowiednio uporzÄ…dkowaÄ‡ gaÅ‚Ä™zie w swoim repozytorium. W tym przypadku bÄ™dziemy operowaÄ‡ na piÄ™ciu rodzajach _branchy_:

- **master** â€“ produkcyjna wersja aplikacji. Do tego brancha bÄ™dziemy mergowaÄ‡ tylko te zmiany, ktÃ³re juÅ¼ zostaÅ‚y wydane na produkcjÄ™ oraz krytyczne hotfixy.
- **hotfix** â€“ jedyna gaÅ‚Ä…Åº bazujÄ…ca ma masterze. To wÅ‚aÅ›nie ona sÅ‚uÅ¼y do szybkiego naprawiania krytycznych bÅ‚Ä™dÃ³w wystÄ™pujÄ…cych na produkcji.
- **release** â€“ na tym branchu przygotowywany jest release kolejnej wersji aplikacji. To wÅ‚aÅ›nie wersja aplikacji z tego brancha trafia na produkcjÄ™.
- **develop** â€“ gaÅ‚Ä…Åº ta jest â€nieoficjalnymâ€ masterem podczas pracy nad releasem. Z tego brancha programiÅ›ci tworzÄ… swoje gaÅ‚Ä™zie robocze i do niego mergujÄ… (rebase-ujÄ…) swojÄ… pracÄ™. Gdy praca nad wszystkimi - funkcjonalnoÅ›ciami w danym releasie jest gotowa, branch ten jest mergowany do gaÅ‚Ä™zi â€releaseâ€.
- **gaÅ‚Ä™zie robocze** (_features_) â€“ na tych gaÅ‚Ä™ziach pracujemy na co dzieÅ„ i tworzymy nowe funkcjonalnoÅ›ci.

ZakÅ‚adamy, Å¼e wszystkie wymienione branche sÄ… juÅ¼ stworzone i w masterze znajduje siÄ™ aktualna wersja naszej aplikacji. Wiemy rÃ³wnieÅ¼, Å¼e w najbliÅ¼szym releasie zaplanowane jest dodanie nowej strony z formularzem kontaktowym. UÅ¼ytkownik aplikacji moÅ¼e za jego pomocÄ… wysÅ‚aÄ‡ ogÃ³lne zapytanie do dziaÅ‚u obsÅ‚ugi klienta. Zapytanie takie jest zapisywane w bazie danych i wysyÅ‚ane mailem na odpowiedniÄ… skrzynkÄ™ pocztowÄ….

Jak powinna wyglÄ…daÄ‡ praca nad takÄ… funkcjonalnoÅ›ciÄ… przy uÅ¼yciu Git Flow? PrzeÅ›ledÅºmy poszczegÃ³lne kroki.

### **1. Przygotowanie zadaÅ„**

Jak widaÄ‡ bÄ™dziemy mieli tutaj zarÃ³wno prace na "froncie" jak i na "backendzie". Czeka nas przygotowanie formularza, zapis zapytania oraz wysyÅ‚ka maila. OczywiÅ›cie jest to tylko przykÅ‚adowe rozwiÄ…zanie â€“ interesuje nas tylko jak to poprawnie przeprowadziÄ‡ w Gicie.

Upewniamy siÄ™, czy nasz obecny **develop** zawiera aktualnÄ… wersjÄ™ aplikacji z **mastera** i bierzemy siÄ™ do pracy.

<img src="/blog/praca-z-git-git-flow/gitflow1.webp" />

### **2. Praca nad zadaniami**

Mamy trzy zadania i trzech programistÃ³w, wiÄ™c kaÅ¼dy z nich tworzy wÅ‚asnÄ… gaÅ‚Ä…Åº roboczÄ… i implementuje swojÄ… czÄ™Å›Ä‡ zadania. W miÄ™dzyczasie oczywiÅ›cie aktualizuje swoje branche o nowe commity, ktÃ³re pojawiÅ‚y siÄ™ w gaÅ‚Ä™zi develop.

<img src="/blog/praca-z-git-git-flow/gitflow2.webp" />

### **3. PoÅ¼ar ğŸ”¥ğŸ”¥ğŸ”¥**

Nasza praca nad nowym releasem idzie zgodnie z planem, ale w miÄ™dzyczasie okazaÅ‚o siÄ™, Å¼e nasz formularz rejestracji z jakiegoÅ› powodu nie przyjmuje adresÃ³w e-mail z poczty _@gmail.com_. Jest to bÅ‚Ä…d, ktÃ³ry nie zostaÅ‚ wyÅ‚apany podczas tworzenia poprzedniego releasu i uniemoÅ¼liwia stworzenia konta bardzo duÅ¼ej liczbie uÅ¼ytkownikÃ³w. Musimy to szybko naprawiÄ‡. Odstawiamy wiÄ™c na chwilÄ™ pracÄ™ nad formularzem i przenosimy siÄ™ na branch **hotfixes**. Zaczynamy pracÄ™, wychodzÄ…c z **mastera**, naprawiamy wszystkie bÅ‚Ä™dy i umieszczamy poprawionÄ… juÅ¼ wersjÄ™ aplikacji na serwerach produkcyjnych. Po zakoÅ„czeniu prac nie zapominamy o tym, aby nasza poprawka trafiÅ‚a do **mastera** oraz do **developa**. PoÅ¼ar zostaÅ‚ ugaszony moÅ¼emy wracaÄ‡ do pracy nad releasem.

<img src="/blog/praca-z-git-git-flow/fire.gif" width={300} />

<img src="/blog/praca-z-git-git-flow/gitflow3.webp" />

### **4. Przygotowanie release-u**

Gdy wszyscy juÅ¼ ukoÅ„czÄ… pracÄ™ nad swoimi zadaniami i w branchu **develop** znajduje siÄ™ juÅ¼ dziaÅ‚ajÄ…cy formularz kontaktowy, przechodzimy do przygotowania _release-u_. Z **developa** tworzymy nowÄ… gaÅ‚Ä…Åº np. `release/3.3.0` i od teraz wszystko, co zwiÄ…zane jest z funkcjonalnoÅ›ciami wymaganymi w tym _release-ie_ dzieje siÄ™ juÅ¼ na tym branchu. Wliczamy w to rÃ³wnieÅ¼ wszelkie poprawki i bugfixy.

<img src="/blog/praca-z-git-git-flow/gitflow4.webp" />

### **5. Release branch**

Kod, ktÃ³ry znajduje siÄ™ na branchu release-owym powinien zostaÄ‡ umieszczony i testowany na Å›rodowisku, ktÃ³re jest jak najbardziej zbliÅ¼one do Å›rodowiska produkcyjnego. W przypadku wykrycia jakichÅ› bÅ‚Ä™dÃ³w (bugÃ³w) sÄ… one naprawiane bezpoÅ›rednio na tym samym branchu. Przechodzimy teraz przez fazy **test** â¡ï¸ **fix** â¡ï¸ **deploy** tak dÅ‚ugo, aÅ¼ nasz release bÄ™dzie w koÅ„cu gotowy do wprowadzenia go na produkcjÄ™.

<img src="/blog/praca-z-git-git-flow/release.webp" />

JeÅ¼eli jedna z poprawek jest doÅ›Ä‡ istotna z punktu widzenia caÅ‚ej aplikacji, nic nie stoi na przeszkodzie, aby w miÄ™dzyczasie zaktualizowaÄ‡ **developa** o commity z release brancha jeszcze zanim kod trafi na produkcjÄ™.

<img src="/blog/praca-z-git-git-flow/gitflow5.webp" />

Co w tym czasie robiÄ… pozostali czÅ‚onkowie zespoÅ‚u?

<img src="/blog/praca-z-git-git-flow/sleep.gif" />

### **6. Nowy release**

OczywiÅ›cie, Å¼e mogÄ… juÅ¼ zaczÄ…Ä‡ pracowaÄ‡ nad kolejnym release-m ğŸ™‚. Branch **develop** zawiera najnowszÄ… wersjÄ™ aplikacji, wiÄ™c spokojnie moÅ¼na zaczÄ…Ä‡ juÅ¼ pracÄ™ nad kolejnymi funkcjonalnoÅ›ciami. Wszelkie poprawki, ktÃ³re zostanÄ… ewentualnie wprowadzone na release branchu i tak trafiÄ… do **developa** po udanym deployu na produkcjÄ™. Jako Å¼e bÄ™dÄ… to pewnie maÅ‚e zmiany, nie powinny nam jakoÅ› bardzo przeszkodziÄ‡ w pracy (czyt. konflikty bÄ™dÄ… Å‚atwe do rozwiÄ…zania ğŸ™‚).

### **7. WyjÅ›cie na produkcjÄ™**

Aplikacja dziaÅ‚a poprawnie, wszystkie testy Å›wiecÄ… siÄ™ na zielono i nie mamy piÄ…tkowego popoÅ‚udnia, wiÄ™c moÅ¼emy wychodziÄ‡ z naszÄ… najnowszÄ… funkcjonalnoÅ›ciÄ… na produkcjÄ™. W momencie, gdy **deploy odbyÅ‚ siÄ™ bez problemÃ³w** oraz aplikacja dziaÅ‚a w porzÄ…dku, moÅ¼emy przejÅ›Ä‡ do ostatniej fazy Git Flow.

TÄ… fazÄ… jest aktualizacja gaÅ‚Ä™zi **develop** oraz **master** o commity, ktÃ³re zostaÅ‚y wydane wraz z ostatnim releasem. W masterze dodatkowo dodajmy tag odpowiadajÄ…cy wersji releasu. DziÄ™ki temu w **masterze** trzymamy tylko ten kod, ktÃ³ry byÅ‚ kiedykolwiek deployowany. W przypadku problemÃ³w z nowÄ… wersjÄ… aplikacji zawsze moÅ¼emy przywrÃ³ciÄ‡ jej poprzedniÄ… dziaÅ‚ajÄ…cÄ… wersjÄ™.

<img src="/blog/praca-z-git-git-flow/gitflow6.webp" />

## Podsumowanie

Git Flow jak widaÄ‡, nie naleÅ¼y do najÅ‚atwiejszych rozwiÄ…zaÅ„. Na pewno jest doÅ›Ä‡ bezpieczny i pomaga nam wyÅ‚apywaÄ‡ sporo bÅ‚Ä™dÃ³w jeszcze w trakcie developmentu i samego testowania. Ze wzglÄ™du na swojÄ… specyfikÄ™ **sprawdzi siÄ™ on najlepiej w przypadku**, gdy nowe funkcjonalnoÅ›ci bÄ…dÅº fixy maÅ‚o krytycznych bÅ‚Ä™dÃ³w wypuszczamy z pewnÄ… regularnoÅ›ciÄ…. PrzykÅ‚adowo wÅ‚aÅ›nie po kaÅ¼dym wspomnianym juÅ¼ wczeÅ›niej dwutygodniowym sprincie.

Git Flow powstaÅ‚ w czasach, gdy taka forma tworzenia i wydawania oprogramowania byÅ‚a niemalÅ¼e standardem. UÅ‚atwiaÅ‚ on wiÄ™c bardzo Å¼ycie programistom. WspÃ³Å‚czeÅ›nie coraz wiÄ™kszÄ… rolÄ™ odgrywajÄ… aplikacje webowe. W ich przypadku na porzÄ…dku dziennym jest wykorzystanie ciÄ…gÅ‚ego dostarczania (**continuous delivery**) nowych, maÅ‚ych funkcjonalnoÅ›ci oraz poprawek. Aplikacje takie nie sÄ… zazwyczaj przywracane do poprzednich wersji, a powstajÄ…ce bÅ‚Ä™dy sÄ… na bieÅ¼Ä…co naprawiane.

W takiej sytuacji stosowanie Git Flow bÄ™dzie bardzo nieefektywne. Potrzebne jest Å‚atwiejsze i szybsze podejÅ›cie. Tym podejÅ›ciem jest **GitHub Flow**, ktÃ³ry jak sama nazwa wskazuje, zostaÅ‚ stworzony przez GitHuba na potrzeby ich codziennych (czasem nawet kilkukrotnych w ciÄ…gu jednego dnia) deployÃ³w. Tym zagadnieniem jednak zajmiemy siÄ™ juÅ¼ w oddzielnym wpisie.

<img src="/blog/praca-z-git-git-flow/gitflow7.webp" />
