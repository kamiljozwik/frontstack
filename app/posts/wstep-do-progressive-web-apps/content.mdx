import { Info } from "../../components/posts";

export const meta = {
  title: "WstÄ™p do Progressive Web Apps (PWA)",
  seo_desc:
    "Post ktÃ³ry moÅ¼e posÅ‚uÅ¼yÄ‡ jako wstÄ™p do Progressive Web Apps (PWA) wszystkim osobom zainteresowanym tworzeniem aplikacji mobilnych za pomocÄ… JavaScript",
  short:
    "Kompleksowe wprowadzenie do Progressive Web Apps (PWA) - stosunkowo nowym podejÅ›ciu do tworzenia aplikacji mobilnych. Od zrozumienia, czym jest PWA i jakie sÄ… jego zalety, po zbadanie jego alternatyw, przyjrzymy siÄ™ rÃ³wnieÅ¼ kluczowym zasadom, w tym istotnej roli Service Workers w umoÅ¼liwianiu funkcjonalnoÅ›ci offline.",
  date: "2020-04-06",
  tags: ["JavaScript", "PWA"],
};

Progressive Web Apps (PWA) jest jednym z najnowszych oraz jednym z najpopularniejszych tematÃ³w w kontekÅ›cie tworzenia aplikacji mobilnych. Czym wiÄ™c jest i dlaczego warto znaÄ‡ to zagadnienie. OmÃ³wimy sobie wszystko dokÅ‚adnie w dzisiejszym wpisie. MoÅ¼na go traktowaÄ‡ jako wstÄ™p do Progressive Web Apps dla osÃ³b ktÃ³re jeszcze nie spotkaÅ‚y siÄ™ z tym zagadnieniem.

## Czym jest PWA?

MoÅ¼e nieco pokrÄ™tnie, ale zaczniemy od tego czym PWA nie jest. Nie jest to Å¼adna nowa technologia, albo framework, ktÃ³rego musielibyÅ›my nauczyÄ‡ siÄ™ w celu jego zastosowania. PWA jest zbiorem dobrych praktyk, ktÃ³rych przestrzeganie spowoduje, Å¼e nasza aplikacja bÄ™dzie â€dostosowywaÅ‚a siÄ™â€ do urzÄ…dzenia uÅ¼ytkownika. Tym dopasowanie sÄ… np. push notyfikacje, moÅ¼liwoÅ›Ä‡ pracy offline, itp.

W idealnym przypadku uÅ¼ytkownik aplikacji nie powinien widzieÄ‡ rÃ³Å¼nicy w tym, czy otworzyÅ‚ naszÄ… aplikacje jako natywnÄ… aplikacjÄ™ stworzonÄ… pod dany system operacyjny czy jako aplikacjÄ™ PWA.

Aplikacja Progressive Web Apps jest stronÄ… internetowÄ…, napisanÄ… przy uÅ¼yciu wielkiej trÃ³jki â€“ HTML, JavaScript oraz CSS. DziaÅ‚a na zarÃ³wno w przeglÄ…darkach (dostosowujÄ…c swÃ³j wyglÄ…d oraz ukÅ‚ad do wielkoÅ›ci ekranu â€“ responsywnoÅ›Ä‡) oraz niczym zainstalowana aplikacja (push notyfikacje, praca offline, dostÄ™p z ikony na pulpicie, brak paska adresu, tryb peÅ‚noekranowy). Wszystko to moÅ¼liwe z wykorzystaniem jedynie technologii frontend-owych!

## Po co nam PWA?

Zasady PWA powstaÅ‚y, aby rozwiÄ…zaÄ‡ jak najwiÄ™cej wspÃ³Å‚czesnych problemÃ³w dotyczÄ…cych natywnych aplikacji. Do niektÃ³rych z nich naleÅ¼Ä…:

- prÄ™dkoÅ›Ä‡ internetu â€“ mimo ciÄ…gÅ‚ego rozwoju telekomunikacji oraz coraz Å›mielszych zapowiedzi sieci 5G, w dalszym ciÄ…gu niemal 60% ludzi na Å›wieci korzysta z Internetu z prÄ™dkoÅ›ciÄ… 2G (czyli ok. 500 kbit/s przy wsparciu EDGE),
- dÅ‚ugi czas Å‚adowania strony â€“ statystycznie, przeciÄ™tny uÅ¼ytkownik aplikacji mobilnej jest w stanie czekaÄ‡ na zaÅ‚adowanie siÄ™ strony ok. 3s! Tak wiÄ™c, czas pojawienia siÄ™ â€jakiejkolwiekâ€ zawartoÅ›ci strony ma tutaj bardzo duÅ¼e znaczenie,
- niechÄ™Ä‡ do instalacji kolejnych aplikacji â€“ statystyczny uÅ¼ytkownik telefonu instaluje nie wiÄ™cej niÅ¼ 1 aplikacjÄ™ miesiÄ™cznie z dedykowanego swojej platformie sklepu z aplikacjami,
- aplikacje ponad przeglÄ…darkÄ… â€“ zdecydowana wiÄ™kszoÅ›Ä‡ uÅ¼ytkownikÃ³w preferuje korzystanie ze swoich ulubionych serwisÃ³w poprzez natywne aplikacje, zamiast przeglÄ…daÄ‡ je w mobilnych przeglÄ…darkach.

## Alternatywy dla PWA

### Aplikacje natywne

PrzychodzÄ…cÄ… pierwszÄ… do gÅ‚owy oraz najbardziej oczywistÄ… opcjÄ… sÄ… aplikacje natywne, czyli pisane pod konkretnÄ… platformÄ™. ChcÄ…c tworzyÄ‡ software dziaÅ‚ajÄ…cy na wszystkich najpopularniejszych urzÄ…dzeniach mobilnych, musimy znaÄ‡ odpowiednio technologie: Objective-C albo Swift dla iOS, Java dla Androida oraz C# dla Windows Phone (wiem, wiemâ€¦ jednak dalej sÄ… na rynku ğŸ™‚ ) oraz oczywiÅ›cie JavaScript dla aplikacji dziaÅ‚ajÄ…cych w przeglÄ…darce.

Jak nie trudno siÄ™ domyÅ›leÄ‡, najwiÄ™kszym problem jest tutaj mnogoÅ›Ä‡ technologii. ChcÄ…c dotrzeÄ‡ do naszych uÅ¼ytkownikÃ³w na wszystkich platformach, musimy de facto stworzyÄ‡ oraz utrzymywaÄ‡ kilka mocno rÃ³Å¼niÄ…cych siÄ™ od siebie projektÃ³w. Do tego dbaÄ‡ o ich spÃ³jnoÅ›Ä‡ a co za tym idzie poÅ›wiÄ™caÄ‡ na to mnÃ³stwo czasu i zasobÃ³w.

### Aplikacje hybrydowe â€“ â€write once, run anywhereâ€

Aplikacje hybrydowe, podobnie jak aplikacje PWA, sÄ… tworzone przy uÅ¼yciu stosu HTML-JS-CSS, jednak sÄ… one umieszczane w sklepach z aplikacjami. Jest to moÅ¼liwe dziÄ™ki wykorzystaniu frameworkÃ³w, ktÃ³re odpowiednio â€pakujÄ…â€ aplikacjÄ™ i wysyÅ‚ajÄ… je do App Storeâ€™Ã³w. PrzykÅ‚adami takich frameworkÃ³w sÄ… [Ionic](https://ionicframework.com/) lub [Flutter](https://flutter.dev/). W tym przypadku to co najczÄ™Å›ciej widzimy na ekranie naszego urzÄ…dzenia jest strona internetowa wyÅ›wietlona przy uÅ¼yciu [WebView](https://developer.android.com/reference/android/webkit/WebView).

Minusem takiego rozwiÄ…zania jest koniecznoÅ›Ä‡ stworzenia naszej aplikacji tak, aby dziaÅ‚aÅ‚a â€satysfakcjonujÄ…coâ€ dobrze ma wszystkich platformach. Do tego jesteÅ›my zaleÅ¼ni od frameworka dziaÅ‚ajÄ…cego pomiÄ™dzy naszÄ… aplikacjÄ… a produktem docelowym na specyficznÄ… platformÄ™. W przypadku bardziej rozbudowanych aplikacji ich wydajnoÅ›Ä‡ rÃ³wnieÅ¼ nie jest zbyt wysoka. PamiÄ™taÄ‡ naleÅ¼y rÃ³wnieÅ¼ o tym, iÅ¼ taka aplikacja musi przejÅ›Ä‡ weryfikacjÄ™ sklepu, aby mogÅ‚a siÄ™ w nim pojawiÄ‡.

### React Native â€“ â€learn once, write anywhereâ€

W tym przypadku aplikacje rÃ³wnieÅ¼ tworzone sÄ… przy uÅ¼yciu standardowego stosu front-endâ€™owego oraz stworzona aplikacja trafia do App Storeâ€™a. Tworzymy tutaj jednak jednÄ… aplikacjÄ™ per platforma. Czyli podobnie jak w przypadku aplikacji natywnych. Z tÄ… rÃ³Å¼nicÄ…, iÅ¼ korzystamy caÅ‚y czas z tej samej technologii.
WydajnoÅ›Ä‡ takich aplikacji jest niemal taka sama jak aplikacji natywnych (piszemy w koÅ„cu pod konkretnÄ… platformÄ…). W dalszym ciÄ…gu mamy jednak kilka projektÃ³w do zarzÄ…dzania.

## PWA â€“ najnowszy gracz w Å›wiecie mobilnym

NajwaÅ¼niejszÄ… rÃ³Å¼nicÄ… miÄ™dzy wszystkimi wymienionymi sposobami tworzenia aplikacji a PWA jest fakt, iÅ¼ aplikacje PWA nie pojawiajÄ… siÄ™ w sklepie danej platformy. PoczÄ…tkowo moÅ¼e to brzmieÄ‡ jak coÅ› negatywnego â€“ przecieÅ¼ wszystkie nasze aplikacje Å›ciÄ…gamy z App Store. Jednak po dokÅ‚adniejszej analizie moÅ¼emy dojÅ›Ä‡ do nieco innych wnioskÃ³w:

- sklepy z aplikacjami zawierajÄ… miliony aplikacji (3,3 mln aplikacji dla Androida i 2,2 mln w sklepie iOS), wiÄ™c szansa przebicia siÄ™ i zaistnienia naszej aplikacji jest bardzo maÅ‚a
- nie umieszczajÄ…c naszej aplikacji w sklepie nie musimy przechodzi przez proces akceptacji naszej aplikacji, ktÃ³ra jest wymagana przy pierwszym umieszczeniu w sklepie jak i przy przy kaÅ¼dej aktualizacji.
- dajÄ…c moÅ¼liwoÅ›Ä‡ zainstalowania aplikacji bezpoÅ›rednio z naszej strony (a technicznie rzecz biorÄ…c â€“ dajÄ…c moÅ¼liwoÅ›Ä‡ uÅ¼ytkownikowi korzystania z naszej aplikacji na swoim urzÄ…dzeniu w taki sposÃ³b, aby miaÅ‚ wraÅ¼enie, iÅ¼ korzysta z aplikacji natywnej), pozycjonujemy swojÄ… aplikacjÄ™ korzystajÄ…c ze standardowych rozwiÄ…zaÅ„ SEO. PopularnoÅ›Ä‡ naszej strony internetowej napÄ™dza jednoczeÅ›nie popularnoÅ›Ä‡ naszej aplikacji.

### Benefity

ZrÃ³bmy krÃ³tkie podsumowanie tego, czemu jako developerzy powinniÅ›my zainteresowaÄ‡ siÄ™ PWA:

- rozmiar aplikacji â€“ rozmiar aplikacji natywnych zazwyczaj mierzony jest w dziesiÄ…tkach MB, podczas gdy dobrze przygotowana aplikacja mobilna czÄ™sto mieÅ›ci siÄ™ w dziesiÄ…tkach kB.
- jeden stack technologiczny â€“ nie musimy uczyÄ‡ siÄ™ jÄ™zykÃ³w specyficznych dla natywnych platform oraz zarzÄ…dzamy tylko jednym projektem
- szybsze budowanie zaangaÅ¼owania uÅ¼ytkownika â€“ ten bÄ™dzie bardziej skory wejÅ›Ä‡ na stronÄ™ i przetestowaÄ‡ tam naszÄ… aplikacjÄ™ przed instalacjÄ… niÅ¼ zainstalowaÄ‡ nieznanÄ… mu aplikacjÄ™ na swoim urzÄ…dzeniu w celu przetestowania
- duÅ¼o szybszy czas wprowadzania nowych funkcjonalnoÅ›ci i poprawek w naszej aplikacji

### Kluczowe zaÅ‚oÅ¼enia

Na samym poczÄ…tku tego artykuÅ‚u napisaÅ‚em, Å¼e PWA jest zbiorem dobrych praktyk. Teraz, gdy mamy juÅ¼ wiÄ™ksze zrozumienie tego czym sÄ… aplikacje PWA, poznajmy jej kluczowe zaÅ‚oÅ¼enia:

- **ResponsywnoÅ›Ä‡** â€“ wyglÄ…d oraz ukÅ‚ad naszej aplikacji zmienia siÄ™ w zaleÅ¼noÅ›ci od rozmiaru ekranu,
- **WyglÄ…d** aplikacji natywnej â€“ uÅ¼ytkownik jest przekonany, iÅ¼ korzysta z aplikacji natywnej a nie z aplikacji WEB-owej,
- **Wsparcie** offline â€“ aplikacja zapisuje w pamiÄ™ci urzÄ…dzenia niezbÄ™dne materiaÅ‚y, aby mogÅ‚a zostaÄ‡ uruchomiona bez poÅ‚Ä…czenia do Internetu,
- **Instalacja** â€“ podczas przeglÄ…dania aplikacji w przeglÄ…darce uÅ¼ytkownikowi zostanie zaproponowana moÅ¼liwoÅ›Ä‡ instalacji przeglÄ…danej aplikacji na urzÄ…dzeniu,
- **Budowanie** zaangaÅ¼owania â€“ zainstalowana aplikacja poprzez notyfikacje push przypomina uÅ¼ytkownikowi o najwaÅ¼niejszych z jego punktu widzenia funkcjonalnoÅ›ciach,
- **WyszukiwalnoÅ›Ä‡** â€“ wykorzystanie SEO w celu lepszego pozycjonowania naszej aplikacji w sieci,
- **AktualnoÅ›Ä‡** â€“ po kaÅ¼dym podÅ‚Ä…czeniu do Internetu, aplikacja samoczynnie aktualizuje swojÄ… zawartoÅ›Ä‡,
- **BezpieczeÅ„stwo** â€“ uÅ¼ycie HTTPS (wymÃ³g konieczny!)
- **ProgresywnoÅ›Ä‡** â€“ aplikacja bÄ™dzie dziaÅ‚aÅ‚a rÃ³wnieÅ¼ na starszych urzÄ…dzeniach bez wzglÄ™du na wersjÄ™ systemu operacyjnego, ewentualnie zmniejszajÄ…c swojÄ… funkcjonalnoÅ›Ä‡,
- **LinkowalnoÅ›Ä‡** â€“ Å‚atwo wskazaÄ‡ na naszÄ… aplikacjÄ™ zamieszczajÄ…c jedynie adres URL pod ktÃ³rym jest umieszczona.

JednÄ… z najwaÅ¼niejszych rzeczy z powyÅ¼szej listy jest moÅ¼liwoÅ›Ä‡ pracy offline. Jako, Å¼e technologiÄ… umoÅ¼liwiajÄ…cÄ… stronie internetowej pracÄ™ offline jest tzw. `Service Worker`, implikuje to stwierdzenie, Å¼e Service Worker jest obowiÄ…zkowÄ… czÄ™Å›ciÄ… kaÅ¼dej aplikacji PWA.

Na temat `Service Workers` powstanie oddzielny, szczegÃ³Å‚owy wpis, dlatego przedstawiÄ™ tutaj jedynie kilka kluczowych zagadnieÅ„ dotyczÄ…cych tej technologii.

<Info title="Uwaga!" type="danger">
  Nie naleÅ¼y myliÄ‡ Service Workers z [Web
  Workers](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers).
  MajÄ… one dwa, zupeÅ‚nie inne zastosowania.
</Info>

Service Worker jest plikiem JavaScript, ktÃ³ry peÅ‚ni rolÄ™ poÅ›rednika (proxy) pomiÄ™dzy aplikacjÄ… a sieciÄ…. DziÄ™ki temu mamy moÅ¼liwoÅ›Ä‡ zapisywania (cacheâ€™owania) zawartoÅ›ci aplikacji (dostÄ™p offline) jak rÃ³wnieÅ¼ przyÅ›pieszamy renderowanie. Service Worker dziaÅ‚a w tle naszej aplikacji i jest niezaleÅ¼ny od gÅ‚Ã³wnej logiki oraz nie wymaga Å¼adnych elementÃ³w UI.

Service Worker nie jest dostÄ™pny podczas pierwszego odwiedzenia strony internetowej. WchodzÄ…c po raz pierwszy na okreÅ›lonÄ… stronÄ™ w technologi PWA, nie zobaczymy od razu okna z propozycjÄ… instalacji. Dzieje siÄ™ tak, poniewaÅ¼ podczas pierwszego uruchomienia strony Service Worker musi siÄ™ zainstalowaÄ‡ i dopiero kolejne przerenderowanie strony odpali nam Service Workerâ€™a.

DrugÄ… obowiÄ…zkowÄ… rzeczÄ… o ktÃ³rej musimy pamiÄ™taÄ‡ podczas tworzenia PWA jest app manifest. Jest to zwykÅ‚y plik `.json` w ktÃ³rym umieszczamy najwaÅ¼niejsze informacje na temat naszej aplikacji. Informacje te sÄ… wykorzystywane przez urzÄ…dzenie uÅ¼ytkownika w celu poprawnego renderowania naszej aplikacji na ekranie. Plik ten zawiera informacje takie jak:

- nazwa peÅ‚na i skrÃ³cona naszej aplikacji
- lokalizacja ikon
- poczÄ…tkowy adres URL (relatywnie do adresu domeny)
- domyÅ›lne ustawienie pozycji ekaranu
- splash screen (ekran widoczny podczas startowania aplikacji)

PrzykÅ‚adowo nasz plik moÅ¼e wyglÄ…daÄ‡ nastÄ™pujÄ…co:

```json
{
  "name": "Perfect App",
  "short_name": "Perfect",
  "description": "Perfect Progressive Web App",
  "icons": [
    {
      "src": "images/icons/icon-128x128.png",
      "sizes": "128x128",
      "type": "image/png"
    },
    {
      "src": "images/icons/icon-256x256.png",
      "sizes": "256x256",
      "type": "image/png"
    }
  ],
  "start_url": "/index.html",
  "orientation": "portrait",
  "display": "standalone",
  "background_color": "#FFFFFF",
  "theme_color": "#000000"
}
```

## Bariery i wyzwania

Mimo Å¼e PWA, czyli Progressive Web Apps, oferujÄ… wiele zalet, jak lepsza wydajnoÅ›Ä‡, oszczÄ™dnoÅ›Ä‡ danych, czy dostÄ™p offline, towarzyszÄ… im teÅ¼ pewne bariery i wyzwania, ktÃ³re mogÄ… wpÅ‚ywaÄ‡ na ich rozwÃ³j i adaptacjÄ™. NiektÃ³re z najbardziej znaczÄ…cych przeszkÃ³d omÃ³wiono poniÅ¼ej.

**NiespÃ³jnoÅ›Ä‡ miÄ™dzy platformami i przeglÄ…darkami**

PierwszÄ… i byÄ‡ moÅ¼e najbardziej oczywistÄ… przeszkodÄ… dla PWA jest rÃ³Å¼nica w obsÅ‚udze technologii PWA przez rÃ³Å¼ne przeglÄ…darki i systemy operacyjne. Na przykÅ‚ad, Safari na iOS obsÅ‚uguje tylko podstawowy zestaw funkcji PWA, podczas gdy Chrome na Androidzie obsÅ‚uguje praktycznie wszystko. W rezultacie, tworzenie PWA, ktÃ³re dziaÅ‚a jednolicie na wszystkich platformach, moÅ¼e byÄ‡ trudne.

**Brak peÅ‚nego dostÄ™pu do API urzÄ…dzenia**

ChociaÅ¼ PWA zyskaÅ‚y dostÄ™p do wielu funkcji urzÄ…dzeÅ„, takich jak notyfikacje push, sÄ… nadal ograniczenia dotyczÄ…ce peÅ‚nego dostÄ™pu do API urzÄ…dzenia. To moÅ¼e utrudniaÄ‡ tworzenie aplikacji, ktÃ³re w peÅ‚ni wykorzystujÄ… moÅ¼liwoÅ›ci urzÄ…dzenia, takie jak interfejsy Bluetooth czy NFC.

**TrudnoÅ›ci z odkrywalnoÅ›ciÄ…**

Tradycyjne aplikacje mobilne sÄ… Å‚atwe do znalezienia i pobrania z dedykowanych sklepÃ³w z aplikacjami, takich jak Google Play czy App Store. PWA nie majÄ… takiej widocznoÅ›ci, co sprawia, Å¼e mogÄ… byÄ‡ trudniejsze do odkrycia dla uÅ¼ytkownikÃ³w. Co wiÄ™cej, niektÃ³re sklepy z aplikacjami, takie jak App Store, majÄ… restrykcyjne polityki dotyczÄ…ce PWA.

**Aktualizacje i utrzymanie**

PoniewaÅ¼ PWA sÄ… z natury rozproszone, aktualizacje i utrzymanie mogÄ… byÄ‡ trudniejsze w porÃ³wnaniu do tradycyjnych aplikacji mobilnych. Dla przykÅ‚adu, w przypadku problemÃ³w z bezpieczeÅ„stwem, aktualizacja PWA moÅ¼e wymagaÄ‡ wiÄ™cej czasu i zasobÃ³w.

**Przekonanie uÅ¼ytkownikÃ³w**

Wiele osÃ³b jest przyzwyczajonych do korzystania z tradycyjnych aplikacji mobilnych i moÅ¼e nie byÄ‡ Å›wiadomych zalet PWA. MoÅ¼e to stanowiÄ‡ barierÄ™ dla adopcji PWA, zwÅ‚aszcza dla firm, ktÃ³re muszÄ… przekonaÄ‡ uÅ¼ytkownikÃ³w do przejÅ›cia na nowÄ… platformÄ™.

## Podsumowanie

Mam nadziejÄ™, Å¼e udaÅ‚o mi siÄ™ w tym wpisie wyjaÅ›niÄ‡ wszystkim zainteresowanym czym jest PWA i jakimi zasadami siÄ™ kieruje. Jako,, Å¼e jest to tylko wstÄ™p do Progressive Web Apps â€“ wpis ten zawiera informacje czysto teoretyczne. JuÅ¼ niedÅ‚ugo na Å‚amach frontstack.pl pojawiÄ… siÄ™ kolejne wpisy zwiÄ…zane z PWA, przede wszystkim wpis poÅ›wiÄ™cony Service Workers oraz tutorial obrazujÄ…cy jak zbudowaÄ‡ w peÅ‚ni dziaÅ‚ajÄ…cÄ… aplikacjÄ™ PWA.
