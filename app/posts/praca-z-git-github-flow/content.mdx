export const meta = {
  title: "Praca z Git â€“ GitHub Flow",
  seo_desc:
    "GitHub Flow jest Å‚atwiejszÄ… alternatywÄ… dla Git Flow. Czy jest jednak od niego lepszy? Przekonaj siÄ™ sam, czytajÄ…c ten artykuÅ‚.",
  short:
    "W tym artykule przyjrzymy siÄ™ bliÅ¼ej procesowi pracy znanemu jako GitHub Flow, ktÃ³ry zapewnia szybkoÅ›Ä‡ i prostotÄ™ dostarczania nowych funkcjonalnoÅ›ci. Opiszemy koncepcjÄ™, przewodzÄ…c przez etapy tworzenia gaÅ‚Ä™zi, realizacji zadaÅ„, tworzenia pull requestÃ³w, aÅ¼ po finalny merge i deploy.",
  date: "2021-02-23",
  tags: ["FrontOps", "Git"],
};

W jednym z poprzednich wpisÃ³w omÃ³wiliÅ›my sobie, czym jest Git Flow. Przedstawiony tam sposÃ³b pracy z Gitem moÅ¼e dla niektÃ³rych wydawaÄ‡ siÄ™ nieco zbyt rozbudowany i skomplikowany. SzczegÃ³lnie teraz, gdy coraz wiÄ™kszÄ… rolÄ™ odgrywajÄ… aplikacje webowe, programiÅ›ci mogÄ… duÅ¼o szybciej i czÄ™Å›ciej dostarczaÄ‡ nowe funkcjonalnoÅ›ci. Tempo takich prac bardzo czÄ™sto pozwala na to, aby po deployu zawierajÄ…cym jakiÅ› bug w programie, zrezygnowaÄ‡ z przywracania poprzedniej wersji aplikacji. DuÅ¼o szybciej bÄ™dzie po prostu wykonaÄ‡ kolejny deploy zawierajÄ…cy juÅ¼ poprawkÄ™. Taki sposÃ³b rozwoju oprogramowania, bÄ™dÄ…cy alternatywÄ… dla Git Flow, nazywamy **GitHub Flow**.

Jak nie trudno siÄ™ domyÅ›liÄ‡, zostaÅ‚ on opracowany i rozpropagowany przez programistÃ³w GitHuba. Znajdzie on gÅ‚Ã³wnie zastosowanie w przypadku maÅ‚ych zespoÅ‚Ã³w bÄ…dÅº pracy samodzielnej. NiewÄ…tpliwÄ… zaletÄ… GitHub Flow jest jego prostota oraz szybkoÅ›Ä‡ dostarczania nowych funkcjonalnoÅ›ci (bÄ…dÅº poprawiania bÅ‚Ä™dÃ³w).

Koncepcja takiego sposobu pracy jest nieduÅ¼o mÅ‚odsza od Git Flow i jednym z pierwszych artykuÅ‚Ã³w na ten temat jest [wpis z 2011](http://scottchacon.com/2011/08/31/github-flow.html) autorstwa Scotta Chacona. Polecam tam zajrzeÄ‡ osobom, ktÃ³re sÄ… ciekawe jak w tamtym czasie wyglÄ…daÅ‚ GitHub ğŸ™‚

Wszystko to, co do tej pory napisaÅ‚em, to jednak tylko teoria. Zobaczmy krok po kroku, jak wyglÄ…da praca z GitHub Flow.

## Jak dziaÅ‚a GitHub Flow?

### GaÅ‚Ä™zie

Model GitHub Flow przewiduje tylko dwa rodzaje gaÅ‚Ä™zi:

- **master** â€“ na tym branchu znajduje siÄ™ produkcyjna i aktualna wersja aplikacji. GaÅ‚Ä…Åº ta jest zawsze gotowa do tego, aby w razie potrzeby mogÅ‚a byÄ‡ deployowana na serwery produkcyjne. To z tej gaÅ‚Ä™zi programiÅ›ci bÄ™dÄ… tworzyÄ‡ swoje branche i do tej gaÅ‚Ä™zi mergujÄ… swoje zmiany.

- **gaÅ‚Ä™zie robocze** â€“ na tych gaÅ‚Ä™ziach tworzymy nowe funkcjonalnoÅ›ci oraz naprawiamy wszelkiego rodzaju bÅ‚Ä™dy w aplikacji.

### Flow

W przypadku GitHub Flow staramy siÄ™ tworzyÄ‡ maÅ‚e, samodzielne zadania, nad ktÃ³rymi moÅ¼na pracowaÄ‡ w izolacji od innych zadaÅ„. PrzykÅ‚ad, ktÃ³ry podaliÅ›my sobie w poprzednim wpisie, dotyczyÅ‚ pracy nad formularzem kontaktowym. Zadanie takie powinno zostaÄ‡ podzielone na niezaleÅ¼ne zadania, ktÃ³re trafiajÄ… do mastera w momencie, gdy zostanÄ… juÅ¼ ukoÅ„czone. ZaÅ‚Ã³Å¼my, Å¼e nasi koledzy przygotowali juÅ¼ backend i teraz my moÅ¼emy pracowaÄ‡ nad umieszczeniem formularza na stronie.

**1. Stworzenie brancha**

NaszÄ… pracÄ™ zawsze zaczynamy wychodzÄ…c z master brancha. To w masterze znajduje siÄ™ przetestowany i dziaÅ‚ajÄ…cy kod. DziÄ™ki temu wiemy, Å¼e pracujemy zawsze na aktualnej wersji aplikacji.

<img src="/blog/praca-z-git-github-flow/flow1.webp" />

**2. Praca nad nowÄ… funkcjonalnoÅ›ciÄ…**

W momencie, gdy jesteÅ›my juÅ¼ na swoim branchu, moÅ¼emy zaczÄ…Ä‡ pracÄ™ nad zadaniem. Regularnie commitujemy swojÄ… pracÄ™ i nie zapominamy o tym, aby aktualizowaÄ‡ swojÄ… gaÅ‚Ä…Åº o nowe commity z mastera. JeÅ¼eli chcemy mieÄ‡ liniowÄ… i czystÄ… historiÄ™ to oczywiÅ›cie najlepiej jest korzystaÄ‡ w tym przypadku z rebase. ZwykÅ‚y merge jednak teÅ¼ speÅ‚ni swoje zadanie. Trzymanie naszej gaÅ‚Ä™zi aktualnej w stosunku do mastera pozwoli nam uniknÄ…Ä‡ wielu konfliktÃ³w w momencie wprowadzania naszych zmian do mastera po zakoÅ„czeniu pracy.

<img src="/blog/praca-z-git-github-flow/flow2.webp" />

**3. Pull Request**

Gdy skoÅ„czymy juÅ¼ nasze zadanie i chcemy je umieÅ›ciÄ‡ w masterze, tworzymy tzw. Pull Request. PowiedzieliÅ›my sobie wczeÅ›niej, Å¼e master jest gaÅ‚Ä™ziÄ…, z ktÃ³rej w kaÅ¼dym momencie moÅ¼emy wykonaÄ‡ deploy na produkcjÄ™. W takim przypadku kod tam siÄ™ znajdujÄ…cy musi byÄ‡ dokÅ‚adnie zweryfikowany przez pozostaÅ‚ych czÅ‚onkÃ³w zespoÅ‚u. Pull Request jest miejscem, gdzie moÅ¼emy dokÅ‚adnie przedyskutowaÄ‡ wprowadzone przez nas rozwiÄ…zania.

DobrÄ… i wskazanÄ… praktykÄ… jest to, aby w trakcie utworzenia Pull Request-a wykonaÄ‡ deploy aplikacji znajdujÄ…cej siÄ™ na naszym branchu na Å›rodowisko, ktÃ³re moÅ¼liwie najbardziej odzwierciedla Å›rodowisko produkcyjne. Deploy taki najlepiej wykonywaÄ‡ automatycznie zawsze po utworzeniu PR-a. Tam moÅ¼emy upewniÄ‡ siÄ™, czy nasze zmiany na pewno dziaÅ‚ajÄ… prawidÅ‚owo, bÄ…dÅº uruchomiÄ‡ na nim testy automatyczne.

W przypadku, gdy podczas omawiania PR-a wyjdÄ… jakieÅ› bÅ‚Ä™dy, ktÃ³re wymagajÄ… poprawki, to poprawiamy je na naszej gaÅ‚Ä™zi roboczej. Wszystkie przyszÅ‚e commity, ktÃ³re wyÅ›lemy do zdalnego repozytorium, bÄ™dÄ… aktualizowaÅ‚y juÅ¼ raz utworzony PR.

<img src="/blog/praca-z-git-github-flow/flow3.webp" />

**4. Merge i deploy**

Gdy nasze zmiany zostaÅ‚y juÅ¼ szczegÃ³Å‚owo skonsultowane z pozostaÅ‚ymi czÅ‚onkami zespoÅ‚u, przyszedÅ‚ czas na pokazanie ich Å›wiatu. GitHub Flow jest doÅ›Ä‡ elastyczny, jeÅ¼eli chodzi o moment wprowadzenia zmian z brancha na produkcjÄ™. MoÅ¼emy skorzystaÄ‡ z jednego z dwÃ³ch wariantÃ³w:

- deploy z gaÅ‚Ä™zi bezpoÅ›rednio na produkcjÄ™. JeÅ¼eli wszystko poszÅ‚o zgodnie z planem i aplikacja nie powoduje Å¼adnych problemÃ³w, wtedy dopiero mergujemy nasz branch do mastera. JeÅ¼eli coÅ› jest nie tak, wykonujemy deploy wersji z mastera i naprawiamy na naszym branchu wykryte problemy.
- merge zaakceptowanego PR-a do mastera i deploy mastera. SposÃ³b trochÄ™ mniej bezpieczny, ale dziÄ™ki temu gÅ‚Ã³wna gaÅ‚Ä…Åº projektu zostaje szybko zaktualizowana o nowe zmiany. Taki proces rÃ³wnieÅ¼ duÅ¼o Å‚atwiej zautomatyzowaÄ‡ za pomocÄ… narzÄ™dzi CI/CD. Wszelkie zmiany w masterze mogÄ… powodowaÄ‡ automatyczny deploy na produkcjÄ™. Problemy wynikÅ‚e po deployu naprawiamy kolejnym PR-em. JeÅ¼eli coÅ› pÃ³jdzie naprawdÄ™ bardzo Åºle, to mamy przecieÅ¼ Gita â€“ revert bÄ…dÅº reset mogÄ… okazaÄ‡ siÄ™ pomocne ğŸ˜‰

<img src="/blog/praca-z-git-github-flow/flow4.webp" />

## Problemy i wyzwania

Podczas korzystania z GitHub Flow, podobnie jak z kaÅ¼dym innym modelem pracy, mogÄ… pojawiÄ‡ siÄ™ pewne wyzwania. Oto kilka z nich, na ktÃ³re warto zwrÃ³ciÄ‡ uwagÄ™:

- **ZarzÄ…dzanie rÃ³wnoczesnymi zmianami.** Jednym z najwiÄ™kszych wyzwaÅ„ w GitHub Flow jest zarzÄ…dzanie sytuacjÄ…, gdy wiele osÃ³b pracuje jednoczeÅ›nie nad rÃ³Å¼nymi gaÅ‚Ä™ziami. Istnieje ryzyko, Å¼e dwie rÃ³Å¼ne gaÅ‚Ä™zie mogÄ… wprowadzaÄ‡ sprzeczne zmiany (tzw. konflikt). Jest to szczegÃ³lnie problematyczne, gdy te zmiany sÄ… scalane do mastera w tym samym czasie. Istotne jest wiÄ™c, aby zespoÅ‚y miaÅ‚y solidne procesy przeglÄ…dania kodu na miejscu i korzystaÅ‚y z narzÄ™dzi Git, takich jak `rebase`, aby utrzymaÄ‡ historiÄ™ czystÄ… i zrozumiaÅ‚Ä….

- **Kontrola jakoÅ›ci kodu.** Przy modelu GitHub Flow, gdzie nowe funkcjonalnoÅ›ci sÄ… czÄ™sto i szybko dodawane do gÅ‚Ã³wnej gaÅ‚Ä™zi, kontrola jakoÅ›ci kodu staje siÄ™ niezwykle waÅ¼na. Wszystko, co jest Å‚Ä…czone z masterem, powinno byÄ‡ dokÅ‚adnie przetestowane i przeglÄ…dane pod kÄ…tem jakoÅ›ci kodu. To moÅ¼e oznaczaÄ‡ potrzebÄ™ silnej kultury przeglÄ…dÃ³w kodu w zespole, a takÅ¼e efektywnego wykorzystania testÃ³w automatycznych.

- **Wymagania dotyczÄ…ce CI/CD.** GitHub Flow opiera siÄ™ na ciÄ…gÅ‚ej integracji i ciÄ…gÅ‚ym dostarczaniu (CI/CD), co oznacza, Å¼e kod jest regularnie Å‚Ä…czony z gÅ‚Ã³wnÄ… gaÅ‚Ä™ziÄ… i wdraÅ¼any na produkcjÄ™. To z kolei wymaga solidnej infrastruktury CI/CD. ZespoÅ‚y muszÄ… skonfigurowaÄ‡ swoje narzÄ™dzia CI/CD tak, aby skutecznie obsÅ‚ugiwaÄ‡ ten proces, co moÅ¼e byÄ‡ wyzwaniem, zwÅ‚aszcza dla mniejszych zespoÅ‚Ã³w lub projektÃ³w z ograniczonymi zasobami.

## Podsumowanie

GitHub Flow jak widaÄ‡, jest doÅ›Ä‡ prostym podejÅ›ciem. ByÄ‡ moÅ¼e nawet czytajÄ…c ten artykuÅ‚, wÅ‚aÅ›nie zdajesz sobie sprawÄ™, Å¼e uÅ¼ywaÅ‚eÅ› tej metody, nawet o tym nie wiedzÄ…c. PodejÅ›cie, w ktÃ³rym mamy jednÄ… gaÅ‚Ä…Åº gÅ‚Ã³wnÄ… (jeszcze uÅ¼ywam nazwy master, ale zauwaÅ¼am, Å¼e main jednak robi siÄ™ coraz bardziej popularne) i jednÄ… gaÅ‚Ä…Åº roboczÄ… jest w sumie czymÅ›, czego uczymy siÄ™, stawiajÄ…c pierwsze kroki w Gicie.

Model ten sprawdzi siÄ™ na pewno w zespoÅ‚ach, ktÃ³re majÄ… moÅ¼liwoÅ›Ä‡ (a czasami rÃ³wnieÅ¼ potrzebÄ™) wprowadzania zmian w kodzie raz bÄ…dÅº nawet kilka razy dziennie. W przypadku gdy podejÅ›cie to bÄ™dzie wspierane przez dobrze przygotowane narzÄ™dzia CI/CD (jak rÃ³wnieÅ¼ testy automatyczne), moÅ¼emy naprawdÄ™ uÅ‚atwiÄ‡ sobie pracÄ™ i rozwijaÄ‡ nasz produkt/aplikacjÄ™/stronÄ™ w tempie szybszym niÅ¼ konkurencja ğŸ™‚

<img src="/blog/praca-z-git-github-flow/flow5.webp" />
