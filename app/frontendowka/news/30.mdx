export const meta = {
  title:
    "Angular 17, RSC bez frameworka, React Query, bezpieczeÅ„stwo w Node.js i nowe komponenty Reactowe dla Google Maps.",
  date: "2023-11-12",
  period: "06.11.2023 - 12.11.2023",
  ogTitles: ["Angular 17", "RSC bez frameworka", "React + Google Maps"],
};

## Angular 17: nowe funkcjonalnoÅ›ci i nowy wyglÄ…d

Angular obchodzi 13-lecie swojego istnienia z wielkimi zmianami w wersji 17. Ta wersja wprowadza nowe funkcje, znaczÄ…co poprawiajÄ…ce wydajnoÅ›Ä‡ i developer experience. Oto kilka punktÃ³w wartych uwagi:

1. **Deferrable Views**: Nowy mechanizm Å‚adowania komponentÃ³w, ktÃ³ry zwiÄ™ksza wydajnoÅ›Ä‡ i uÅ‚atwia pracÄ™ deweloperom.
2. **Wbudowane PÄ™tle Kontroli PrzepÅ‚ywu**: OferujÄ… do 90% szybsze dziaÅ‚anie w benchmarkach.
3. **Szybsze Budowanie Aplikacji**: Do 87% szybsze budowanie dla renderowania hybrydowego i 67% dla renderowania po stronie klienta.
4. **Nowy WyglÄ…d**: OdÅ›wieÅ¼ona estetyka, odzwierciedlajÄ…ca nowoczesne funkcje Angulara.
5. **Interaktywna ÅšcieÅ¼ka Nauki**: Nowe narzÄ™dzia edukacyjne oparte na WebContainers, umoÅ¼liwiajÄ…ce naukÄ™ Angulara bezpoÅ›rednio w przeglÄ…darce (w Svelte sprawdza siÄ™ to Å›wietnie).

Angular 17 prezentuje siÄ™ jako platforma gotowa na przyszÅ‚e wyzwania w tworzeniu aplikacji webowych, oferujÄ…c narzÄ™dzia, ktÃ³re znaczÄ…co uÅ‚atwiajÄ… i przyspieszajÄ… pracÄ™ programistÃ³w.

Jak myÅ›licie, czy te nowe funkcje zmieniÄ… sposÃ³b, w jaki tworzycie aplikacje w Angularze?

<small>
  Å¹rÃ³dÅ‚o:
  [https://blog.angular.io/introducing-angular-v17-4d7033312e4b](https://blog.angular.io/introducing-angular-v17-4d7033312e4b)
</small>

## Czemu potrzebujesz React Query?

JeÅ›li zajmujecie siÄ™ tworzeniem aplikacji w React, to prawdopodobnie zetknÄ™liÅ›cie siÄ™ z [React Query](https://tanstack.com/query/v3/). To narzÄ™dzie jest cenione za upraszczenie operacji asynchronicznych w aplikacjach React podczas pobierania danych. Mimo, Å¼e moÅ¼na uÅ¼ywaÄ‡ prostego `fetch` w poÅ‚Ä…czeniu z `useEffect` do pobierania danych z serwera, `React Query` oferuje znacznie wiÄ™cej, w tym cachowanie, ponawianie pobierania, synchronizacjÄ™ danych, prefetching i wiele innych.

Autor artykuÅ‚u wskazuje, Å¼e nawet w prostych przypadkach uÅ¼ycia, kod bez `React Query` moÅ¼e zawieraÄ‡ jakieÅ› ukryte bugi. Na przykÅ‚ad, wystÄ™puje ryzyko `race conditions`, gdy odpowiedzi sieciowe przychodzÄ… w innej kolejnoÅ›ci, niÅ¼ zostaÅ‚y wysÅ‚ane. MoÅ¼e to skutkowaÄ‡ niekonsystentnym stanem, gdzie na przykÅ‚ad wybieramy kategoriÄ™ "ksiÄ…Å¼ki", a wyÅ›wietlane sÄ… dane dla "filmÃ³w".

Dodatkowo, istnieje kilka innych problemÃ³w, jak brak stanu Å‚adowania, co nieco utrudnia wyÅ›wietlenie interfejsu uÅ¼ytkownika w trakcie oczekiwania na dane. Do tego mamy problem pustego stanu, kiedy nie jesteÅ›my w stanie odrÃ³Å¼niÄ‡ sytuacji "brak danych jeszcze" od "w ogÃ³le brak danych". A takÅ¼e kwestia braku resetowania danych i bÅ‚Ä™dÃ³w przy zmianie kategorii (patrz przykÅ‚ad z ksiÄ…Å¼kÄ… i filmem), co moÅ¼e prowadziÄ‡ do nieprawidÅ‚owego wyÅ›wietlania danych lub bÅ‚Ä™dÃ³w.

Wszystkie te kwestie pokazujÄ…, jak `React Query` moÅ¼e uproÅ›ciÄ‡ i poprawiÄ‡ jakoÅ›Ä‡ kodu, nawet w prostych aplikacjach.

Czy uwaÅ¼acie, Å¼e warto wÅ‚Ä…czyÄ‡ React Query do Waszych projektÃ³w, aby uniknÄ…Ä‡ tych problemÃ³w? Czy moÅ¼e macie juÅ¼ doÅ›wiadczenie z tym narzÄ™dziem?

<small>
  Å¹rÃ³dÅ‚o:
  [https://tkdodo.eu/blog/why-you-want-react-query](https://tkdodo.eu/blog/why-you-want-react-query)
</small>

## React Server Components bez frameworka

W Å›wiecie Reacta pojawia siÄ™ coraz wiÄ™cej dyskusji na temat [React Server Components](https://nextjs.org/docs/app/building-your-application/rendering/server-components) (RSC), szczegÃ³lnie po ogÅ‚oszeniu moÅ¼liwoÅ›ci ich wykorzystania bez uÅ¼ycia dodatkowego frameworka. Co to oznacza dla twÃ³rcÃ³w aplikacji? OtÃ³Å¼, komponenty serwerowe React nie mogÄ… byÄ‡ bezpoÅ›rednio importowane ani renderowane przez komponenty klienta. Jednak renderowane przez nie dane mogÄ… byÄ‡ pobierane przez klienta z serwera i wstawiane do drzewa komponentÃ³w po stronie klienta.

Ciekawym aspektem RSC jest istnienie tzw. `React Shared Components`, ktÃ³re sÄ… neutralne i mogÄ… dziaÅ‚aÄ‡ zarÃ³wno jako komponenty serwerowe, jak i klienckie. Oznacza to, Å¼e dany komponent wspÃ³Å‚dzielony w poddrzewie komponentÃ³w React ostatecznie staje siÄ™ albo komponentem serwerowym, albo klienta, w zaleÅ¼noÅ›ci od kontekstu, w ktÃ³rym jest renderowany.

Autor artykuÅ‚u podjÄ…Å‚ siÄ™ wyzwania praktycznego wykorzystania RSC bez frameworka, eksperymentujÄ…c z migracjÄ… aplikacji do notatek (klasyczne `To Do App`) zbudowanej pierwotnie z uÅ¼yciem Create React App. Celem eksperymentu byÅ‚o zrozumienie, jak dziaÅ‚ajÄ… RSC, oraz pokazanie wartoÅ›ci frameworka, mimo Å¼e autor wydaje siÄ™ byÄ‡ zwolennikiem budowania wÅ‚asnych rozwiÄ…zaÅ„ produkcyjnych.

W ramach tego eksperymentu autor skupiÅ‚ siÄ™ na kilku aspektach, takich jak funkcjonalnoÅ›Ä‡ aplikacji do notatek, uÅ¼ycie komponentÃ³w serwerowych i klienta, renderowanie po stronie serwera, pobieranie danych za pomocÄ… komponentÃ³w serwerowych, routing dziaÅ‚ajÄ…cy zarÃ³wno po stronie klienta, jak i serwera, odÅ›wieÅ¼anie komponentÃ³w serwerowych z klienta oraz stworzenie uÅ¼ytecznego playgrounda dla RSC.

To interesujÄ…ce podejÅ›cie pokazuje, jak RSC mogÄ… zmieniÄ‡ sposÃ³b tworzenia aplikacji w React, nawet bez uÅ¼ycia dodatkowego frameworka.

Czy Wy teÅ¼ myÅ›licie o eksperymentowaniu z RSC w Waszych projektach?

<small>
  Å¹rÃ³dÅ‚o:
  [https://timtech.blog/posts/react-server-components-rsc-no-framework](https://timtech.blog/posts/react-server-components-rsc-no-framework)
</small>

## Nowe komponenty Reacta dla API (Google) Maps

Google wprowadziÅ‚o waÅ¼nÄ… nowoÅ›Ä‡ dla deweloperÃ³w Reacta: bibliotekÄ™ `@vis.gl/react-google-maps` ([link](https://www.npmjs.com/package/@vis.gl/react-google-maps)). Jest to pierwsza biblioteka od Google, uÅ‚atwiajÄ…ca integracjÄ™ API Google Maps z aplikacjami Reactowymi.

Nowe narzÄ™dzie w kilku punktach wyglÄ…da nastÄ™pujÄ…co:

- **Åatwa Integracja**: Biblioteka zawiera komponenty Reacta odpowiadajÄ…ce elementom API Maps oraz hooki do dostÄ™pu do instancji mapy i dodatkowych bibliotek, co przyspieszy nam czas Å‚adowania i uÅ‚atwi zarzÄ…dzanie kodem.

- **DostÄ™pnoÅ›Ä‡**: Biblioteka jest dostÄ™pna na `npm`.

- **Open Source**: NarzÄ™dzie jest oczywiÅ›cie open source-owe i zarzÄ…dzane przez OpenJS Foundation. ZespÃ³Å‚ `vis.gl` bÄ™dzie zarzÄ…dzaÅ‚ pull requestami i wydaniami nowych wersji, a Google zobowiÄ…zuje siÄ™ do regularnych aktualizacji paczki.

- **SpoÅ‚ecznoÅ›Ä‡**: Deweloperzy mogÄ… znaleÅºÄ‡ przykÅ‚ady i dokumentacjÄ™ na stronie projektu oraz dzieliÄ‡ siÄ™ swoimi doÅ›wiadczeniami w kanale `#react` na [serwerze Discord](https://goo.gle/maps-platform-discord) Google Maps Platform.

To duÅ¼y krok naprzÃ³d dla twÃ³rcÃ³w aplikacji, ktÃ³rzy chcÄ… wzbogaciÄ‡ swoje projekty o moÅ¼liwoÅ›ci stojÄ…ce za Google Maps.

Czy planujecie wykorzystaÄ‡ te nowe moÅ¼liwoÅ›ci w swoich projektach?

<small>
  Å¹rÃ³dÅ‚o:
  [https://cloud.google.com/blog/products/maps-platform/introducing-react-components-for-the-maps-javascript-api/](https://cloud.google.com/blog/products/maps-platform/introducing-react-components-for-the-maps-javascript-api/)
</small>

## Generowanie sourcemapÃ³w dla artefaktÃ³w produkcyjnych w React

Niedawno w React zostaÅ‚a zmergowana waÅ¼na zmiana, dotyczÄ…ca generowania sourcemapÃ³w dla artefaktÃ³w produkcyjnych. Oto szczegÃ³Å‚y:

1. **Aktualizacja Rollup Build Pipeline**: Ta zmiana aktualizuje pipeline Rollup, aby generowaÄ‡ sourcemapy dla artefaktÃ³w produkcyjnych, takich jak `react-dom.production.min.js`.

2. **Wymagania**: Zmiana ta wymaga zmian w Rollup v3, ktÃ³re zostaÅ‚y niedawno zmergowane.

3. **Specyfika SourcemapÃ³w**: Sourcemapy sÄ… generowane tylko dla artefaktÃ³w produkcyjnych. Nie sÄ… tworzone dla artefaktÃ³w deweloperskich, profilowania, UMD, czy artefaktÃ³w `shouldStayReadable`.

4. **ZawartoÅ›Ä‡ SourcemapÃ³w**: Wygenerowane sourcemapy zawierajÄ… zawartoÅ›Ä‡ zgrupowanych ÅºrÃ³deÅ‚, tuÅ¼ przed tym, jak zostaÅ‚y zminifikowane przez `Closure`. Nie sÄ… to oryginalne pliki ÅºrÃ³dÅ‚owe, ale lepiej odzwierciedlajÄ… rzeczywisty kod dziaÅ‚ajÄ…cy w ramach pakietu, ze wszystkimi feature flagami i transformacjami zastosowanymi do plikÃ³w ÅºrÃ³dÅ‚owych. Sourcemapy nadal pokazujÄ… komentarze i oryginalne nazwy funkcji, co poprawia debuggowanie w aplikacji produkcyjnej.

Pewnie nie wszyscy z nas bÄ™dÄ… zainteresowani debuggowaniem Reacta, ale warto wiedzieÄ‡, Å¼e jest to teraz moÅ¼liwe z sourcemapami ğŸ˜‰

<small>
  Å¹rÃ³dÅ‚o:
  [https://github.com/facebook/react/pull/26446](https://github.com/facebook/react/pull/26446)
</small>

## BezpieczeÅ„stwo z Node.js

Czy wiesz, Å¼e bezpieczeÅ„stwo aplikacji Node.js to nie tylko hasÅ‚a i szyfrowanie? Repozytorium `awesome-nodejs-security` na GitHubie oferuje niesamowite zasoby skupiajÄ…ce siÄ™ na zabezpieczeniach Node.js. Znajdziesz tam narzÄ™dzia, artykuÅ‚y i nawet hackatony edukacyjne!

SpÃ³jrzmy na kilka przykÅ‚adÃ³w:

- **Web Framework Hardening**: `helmet` i `koa-helmet` to narzÄ™dzia, ktÃ³re pomagajÄ… zabezpieczyÄ‡ aplikacje Express i Koa poprzez ustawianie rÃ³Å¼nych nagÅ‚Ã³wkÃ³w HTTP. MajÄ… one kluczowe znaczenie w ochronie przed atakami takimi jak cross-site scripting (XSS) i clickjacking.
- **Static Code Analysis**: NarzÄ™dzia takie jak [`eslint-plugin-security`](https://www.npmjs.com/package/eslint-plugin-security) i [`NodeJSScan`](https://github.com/ajinabraham/nodejsscan) pomagajÄ… w wykrywaniu potencjalnych sÅ‚aboÅ›ci bezpieczeÅ„stwa w kodzie. SÄ… one nieocenione w utrzymaniu wysokiego poziomu bezpieczeÅ„stwa aplikacji.
- **Dynamic Application Security Testing** (DAST): ChoÄ‡ nie wymienione bezpoÅ›rednio, DAST jest rÃ³wnie waÅ¼ne. Jest to proces testowania aplikacji pod kÄ…tem luk bezpieczeÅ„stwa w Å›rodowisku uruchomieniowym.

Ciekawe, jakie narzÄ™dzia bezpieczeÅ„stwa stosujesz w swoich projektach Node.js?

<small>
  Å¹rÃ³dÅ‚o:
  [https://github.com/lirantal/awesome-nodejs-security](https://github.com/lirantal/awesome-nodejs-security)
</small>

## Komponenty "Headless" w React

W Å›wiecie Reacta, gdzie UI staje siÄ™ coraz bardziej skomplikowane, pojawia siÄ™ wyzwanie zwiÄ…zane z przeplatanÄ… logikÄ… i wizualizacjÄ… komponentÃ³w. To sprawia, Å¼e trudniejsze staje siÄ™ zrozumienie zachowania komponentu, jego testowanie, a takÅ¼e tworzenie podobnych komponentÃ³w o rÃ³Å¼nym wyglÄ…dzie. Tutaj z pomocÄ… przychodzi wzorzec Komponentu Bezinterfejsowego (ang. `Headless Component`), ktÃ³ry oddziela caÅ‚Ä… logikÄ™ niewizualnÄ… i zarzÄ…dzanie stanem od "wyglÄ…du" komponentu. W praktyce, oznacza to oddzielenie "mÃ³zgu" komponentu od jego wyglÄ…du.

### Jakie problemy to rozwiÄ…zuje?

ZaÅ‚Ã³Å¼my, Å¼e budujesz prostÄ… listÄ™ rozwijanÄ…. PoczÄ…tkowo wydaje siÄ™ to proste â€“ zarzÄ…dzasz stanem otwierania/zamykania i projektujesz jej wyglÄ…d. Jednak wraz z rozwojem aplikacji, rosnÄ… rÃ³wnieÅ¼ wymagania dotyczÄ…ce tej listy, takie jak wsparcie dla dostÄ™pnoÅ›ci, nawigacja klawiaturÄ…, rozwaÅ¼anie danych asynchronicznych, rÃ³Å¼norodnoÅ›Ä‡ UI i rozbudowa funkcji. Wszystkie te aspekty dodajÄ… warstwy zÅ‚oÅ¼onoÅ›ci, a mieszanie stanu, logiki i prezentacji UI sprawia, Å¼e komponent staje siÄ™ trudny do utrzymania i ogranicza jego ponowne wykorzystanie.

### Jak to dziaÅ‚a?

Wzorzec Headless Component podkreÅ›la oddzielenie logiki od reprezentacji UI. Jest to wzorzec projektowy w React, gdzie komponent - zazwyczaj implementowany jako hooki Reacta - odpowiada wyÅ‚Ä…cznie za logikÄ™ i zarzÄ…dzanie stanem, nie narzucajÄ…c specyficznej wizualizacji UI. Oferuje on "mÃ³zg" operacji, ale pozostawia "wyglÄ…d" deweloperowi implementujÄ…cemu go. W praktyce, komponent bezinterfejsowy wydaje siÄ™ byÄ‡ cienkÄ… warstwÄ… wspÃ³Å‚pracujÄ…cÄ… z widokami JSX z jednej strony, a komunikujÄ…cÄ… siÄ™ z podstawowymi modelami danych z drugiej, gdy jest to wymagane.

### PrzykÅ‚ad: Headless Dropdown

WeÅºmy na przykÅ‚ad komponent bezinterfejsowy listy rozwijanej. OdpowiadaÅ‚by on za zarzÄ…dzanie stanem otwierania/zamykania, wybÃ³r elementÃ³w, nawigacjÄ™ klawiaturÄ… itp. Gdy nadchodzi czas na renderowanie, zamiast wyÅ›wietlaÄ‡ swÃ³j wÅ‚asny z gÃ³ry okreÅ›lony UI listy rozwijanej, dostarcza ten stan i logikÄ™ funkcji podrzÄ™dnej lub komponentowi, pozwalajÄ…c deweloperowi zdecydowaÄ‡, jak powinien wyglÄ…daÄ‡ wizualnie.

JeÅ¼eli jeszcze nie spotkaÅ‚eÅ› siÄ™ z takim podejÅ›ciem i chciaÅ‚byÅ› dowiedzieÄ‡ siÄ™ wiÄ™cej, to polecam przeczytaÄ‡ artykuÅ‚, ktÃ³ry znajdziesz w ÅºrÃ³dle ğŸ˜‰

Czy miaÅ‚eÅ›/aÅ› juÅ¼ doÅ›wiadczenie z implementacjÄ… wzorca Headless Component w swoich projektach React? Jakie sÄ… Twoje przemyÅ›lenia na temat jego wpÅ‚ywu na utrzymanie i ponowne wykorzystanie kodu?

<small>
  Å¹rÃ³dÅ‚o:
  [https://martinfowler.com/articles/headless-component.html](https://martinfowler.com/articles/headless-component.html)
</small>
